### 基础配置
@baseUrl = http://127.0.0.1:33001/api/auth
@email = loveljw@gdmu.edu.cn
@password = 123456

# ==========================================
# 第一阶段：身份认证流程 (Authentication)
# ==========================================

### 1.1 发送邮件验证码
# 注意：需确保后端 authService 中的 SMTP 配置正确
POST {{baseUrl}}/send-code
Content-Type: application/json

{
    "email": "{{email}}"
}

### 1.2 用户注册 (GitHub 风格)
# 注册成功后，后端会直接返回 token 和 role
POST {{baseUrl}}/register
Content-Type: application/json

{
    "username": "TeacherZhang",
    "email": "{{email}}",
    "password": "{{password}}",
    "code": "241626" 
}

### 1.3 用户登录
# @name login
POST {{baseUrl}}/login
Content-Type: application/json

{
    "email": "{{email}}",
    "password": "{{password}}"
}

### 获取登录后的 Token (用于后续请求)
@authToken = {{login.response.body.data.token}}


# ==========================================
# 第二阶段：权限与角色测试 (Authorization)
# ==========================================

### 2.1 校验凭证有效性
POST {{baseUrl}}/tokenVerify
Authorization: Bearer {{authToken}}

### 2.2 测试教师端数据访问 (权限拦截测试)
# 如果你是用学生账号登录，这里应该被拦截或返回权限不足
GET http://127.0.0.1:33001/api/user/getClassStats
Authorization: Bearer {{authToken}}


# ==========================================
# 第三阶段：业务功能联调 (Business)
# ==========================================

### 3.1 提交作业 AI 批改
POST http://127.0.0.1:33001/api/user/addQuestion
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
    "studentId": "TeacherZhang",
    "content": "请解释一下操作系统的页式存储管理"
}