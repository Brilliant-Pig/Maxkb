import{ay as u,az as _,b8 as f,aB as s,aA as w,bf as W,aF as y,bS as L,cq as h,c7 as C,ce as b}from"./chat-CUfIjAsy.js";import{c as k,W as q,a as T,b as r,d as x}from"./wecom.prod-BQnzBeVx.js";const z={id:"wecom-qr",class:"wecom-qr flex"},I=u({__name:"wecomQrCode",props:{config:{}},setup(i){const p=_(),c=f(),{params:{accessToken:n}}=c,l=s({}),g=s({isWeComLogin:!1}),{chatUser:d}=w(),t=i;return(async()=>{await L();const o={corpId:t.config.corp_id,agentId:t.config.agent_id},a=localStorage.getItem("MaxKB-locale")||h()||"en-US",m=window.location.origin;try{l.value=k({el:"#wecom-qr",params:{login_type:x.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:T.callback,panel_size:q.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){d.wecomCallback(e,n).then(()=>{setTimeout(()=>{p.push({name:"chat",params:{accessToken:n},query:c.query})})})},onLoginFail(e){C(`${e.errMsg}`)}})}catch{}})(),(o,a)=>(y(),W("div",z))}}),M=b(I,[["__scopeId","data-v-543adae1"]]);export{M as default};
