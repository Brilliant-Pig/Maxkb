import{ay as R,az as X,aP as T,aO as l,aD as d,b7 as Y,aW as b,b1 as I,aF as n,aE as v,aG as _,aX as G,aY as J,b8 as O,aH as B,aI as P,aJ as S,bY as H,cf as Q,aA as ee,aQ as te,cD as ne,aB as V,b6 as ae,b2 as q,bX as z,aT as E,da as se}from"./admin-Ca7cl6NN.js";const oe={key:0,class:"sidebar-item"},ce={key:1},re=R({__name:"SidebarItem",props:{menu:{},activeMenu:{}},setup(e){const s=e,k=X(),y=T(),{params:{id:o,type:a,from:i}}=y;function g(){return H(a)?s.menu.name!=="AppHitTest":!0}function f(t){H(a)&&(t==null?void 0:t.name)==="AppSetting"&&k.push({path:`/application/${i}/${o}/workflow`})}const w=l(()=>{var t,p,c,M,r;return s.activeMenu===s.menu.path?((t=s.menu.meta)==null?void 0:t.iconActive)||((c=(p=s.menu)==null?void 0:p.meta)==null?void 0:c.icon):(r=(M=s.menu)==null?void 0:M.meta)==null?void 0:r.icon});return(t,p)=>{var $,D;const c=d("AppIcon"),M=d("el-icon"),r=d("sidebar-item",!0),m=d("el-sub-menu"),x=d("el-menu-item"),A=Y("hasPermission");return(!e.menu.meta||!e.menu.meta.hidden)&&g()?(n(),b("div",oe,[($=e.menu)!=null&&$.children&&((D=e.menu)==null?void 0:D.children.length)>0?(n(),v(m,{key:0,index:e.menu.path,"popper-class":"sidebar-container-popper"},{title:_(()=>{var u;return[B(M,null,{default:_(()=>[e.menu.meta&&e.menu.meta.icon?(n(),v(c,{key:0,iconName:w.value,class:"sidebar-icon"},null,8,["iconName"])):I("",!0)]),_:1}),P("span",null,S(t.$t((u=e.menu.meta)==null?void 0:u.title)),1)]}),default:_(()=>{var u;return[(n(!0),b(G,null,J((u=e.menu)==null?void 0:u.children,(C,h)=>{var N;return O((n(),v(r,{key:h,menu:C,activeMenu:e.activeMenu},null,8,["menu","activeMenu"])),[[A,(N=C.meta)==null?void 0:N.permission]])}),128))]}),_:1},8,["index"])):(n(),v(x,{key:1,ref:"subMenu",index:e.menu.path,"popper-class":"sidebar-popper",onClick:p[0]||(p[0]=u=>f(e.menu))},{title:_(()=>{var u;return[e.menu.meta&&e.menu.meta.icon?(n(),v(c,{key:0,iconName:w.value,class:"sidebar-icon"},null,8,["iconName"])):I("",!0),e.menu.meta&&e.menu.meta.title?(n(),b("span",ce,S(t.$t((u=e.menu.meta)==null?void 0:u.title)),1)):I("",!0)]}),_:1},8,["index"]))])):I("",!0)}}}),ue=Q(re,[["__scopeId","data-v-0d71bc99"]]),le={class:"breadcrumb ml-4 mt-4 mb-12 flex align-center"},ie={class:"flex align-center"},me=["src"],de=["title"],pe=R({__name:"index",setup(e){const{common:s,folder:k,user:y}=ee(),o=T(),a=X(),{meta:{activeMenu:i},params:{id:g,folderId:f},query:{isShared:w}}=o,t=l(()=>o.path.includes("shared")?"systemShare":o.path.includes("resource-management")?"systemManage":"workspace"),p=l(()=>o.path.includes("application")?"application":o.path.includes("knowledge")?"knowledge":"application"),c=l(()=>te[p.value].workspace),M=l(()=>f==="share"||w==="true");ne((h,N)=>{s.saveBreadcrumb(null)});const r=V(!1),m=V(null),x=l(()=>i.includes("application")),A=l(()=>i.includes("knowledge")),$=l(()=>o.path.includes("shared")?"/system/shared"+i:o.path.includes("resource-management")?"/system/resource-management"+i:i);function D(){r.value=!0,E({type:"knowledge",isShared:M.value,systemType:t.value}).getKnowledgeDetail(g).then(h=>{m.value=h.data,r.value=!1}).catch(()=>{r.value=!1})}function u(){r.value=!0,E({type:"application",systemType:t.value}).getApplicationDetail(g).then(h=>{m.value=h.data,r.value=!1}).catch(()=>{r.value=!1})}function C(){A.value?k.setCurrentFolder({id:c.value.folderRead(f)?f:y.getWorkspaceId()}):x.value&&k.setCurrentFolder({id:c.value.folderRead(m.value.folder)?m.value.folder:y.getWorkspaceId()}),a.push({path:$.value})}return ae(()=>{A.value?D():x.value&&u()}),(h,N)=>{var F,K,L;const U=d("back-button"),j=d("el-avatar"),Z=d("KnowledgeIcon");return n(),b("div",le,[B(U,{onClick:C}),P("div",ie,[x.value?(n(),v(j,{key:0,shape:"square",size:24,style:{background:"none"},class:"mr-8"},{default:_(()=>{var W;return[P("img",{src:q(z)((W=m.value)==null?void 0:W.icon,q(z)("./favicon.ico")),alt:""},null,8,me)]}),_:1})):A.value?(n(),v(Z,{key:1,type:(F=m.value)==null?void 0:F.type,class:"mr-8"},null,8,["type"])):I("",!0),P("div",{class:"ellipsis",title:(K=m.value)==null?void 0:K.name},S((L=m.value)==null?void 0:L.name),9,de)])])}}}),ve=Q(pe,[["__scopeId","data-v-da1cb23c"]]),fe={class:"sidebar p-8"},he={key:0},be=R({__name:"index",setup(e){const s=T(),k=l(()=>{const{meta:a}=s;return a==null?void 0:a.breadcrumb}),y=l(()=>{const{meta:a}=s;return se(a.parentPath,a.parentName)}),o=l(()=>{const{path:a,meta:i}=s;return i.active||a});return(a,i)=>{const g=d("el-menu"),f=d("el-scrollbar"),w=Y("hasPermission");return n(),b("div",fe,[k.value?(n(),b("div",he,[B(ve)])):I("",!0),B(f,{"wrap-class":"scrollbar-wrapper"},{default:_(()=>[B(g,{"default-active":o.value,router:""},{default:_(()=>[(n(!0),b(G,null,J(y.value,(t,p)=>{var c;return O((n(),v(ue,{key:p,menu:t,activeMenu:o.value},null,8,["menu","activeMenu"])),[[w,(c=t.meta)==null?void 0:c.permission]])}),128))]),_:1},8,["default-active"])]),_:1})])}}});export{be as _};
