import{L as P,a as C}from"./LoginContainer-BJmJxKpM.js";import{ay as L,az as M,aP as $,aB as i,b6 as k,aC as l,aD as d,aE as R,aF as z,aG as r,aH as o,aI as u,aJ as m,aK as v,b2 as q,aL as B,b3 as S}from"./admin-Ca7cl6NN.js";const N={class:"mb-24"},T={class:"mb-24"},U={class:"mb-24"},A={class:"operate-container mt-12"},H=L({__name:"ResetPassword",setup(D){const p=M(),h=$(),{params:{code:g,email:w}}=h,e=i({password:"",re_password:"",email:"",code:""});k(()=>{g&&w?(e.value.code=g,e.value.email=w):p.push("forgot_password")});const b=i({password:[{required:!0,message:l("views.login.loginForm.re_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:l("views.login.loginForm.password.lengthMessage"),trigger:"blur"}],re_password:[{required:!0,message:l("views.login.loginForm.re_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:l("views.login.loginForm.password.lengthMessage"),trigger:"blur"},{validator:(s,a,t)=>{e.value.password!=e.value.re_password?t(new Error(l("views.login.loginForm.re_password.validatorMessage"))):t()},trigger:"blur"}]}),c=i(),y=i(!1),F=()=>{var s;(s=c.value)==null||s.validate().then(()=>B.postResetPassword(e.value,y)).then(()=>{S(l("common.modifySuccess")),p.push({name:"login"})})};return(s,a)=>{const t=d("el-input"),_=d("el-form-item"),V=d("el-form"),f=d("el-button");return z(),R(C,null,{default:r(()=>[o(P,{subTitle:s.$t("theme.defaultSlogan")},{default:r(()=>[u("h2",N,m(s.$t("views.login.resetPassword")),1),o(V,{class:"reset-password-form",ref_key:"resetPasswordFormRef",ref:c,model:e.value,rules:b.value},{default:r(()=>[u("div",T,[o(_,{prop:"password"},{default:r(()=>[o(t,{type:"password",size:"large",class:"input-item",modelValue:e.value.password,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.password=n),placeholder:s.$t("views.login.loginForm.password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})]),u("div",U,[o(_,{prop:"re_password"},{default:r(()=>[o(t,{type:"password",size:"large",class:"input-item",modelValue:e.value.re_password,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.re_password=n),placeholder:s.$t("views.login.loginForm.re_password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1})])]),_:1},8,["model","rules"]),o(f,{size:"large",type:"primary",class:"w-full",onClick:F},{default:r(()=>[v(m(s.$t("common.confirm")),1)]),_:1}),u("div",A,[o(f,{size:"large",class:"register",onClick:a[2]||(a[2]=n=>q(p).push("/login")),link:"",type:"primary",icon:"ArrowLeft"},{default:r(()=>[v(m(s.$t("views.login.buttons.backLogin")),1)]),_:1})])]),_:1},8,["subTitle"])]),_:1})}}});export{H as default};
