import{ay as P,aB as m,bd as R,aC as T,be as h,aD as s,aE as z,aF as g,aG as r,aH as t,bf as G,bg as H,bh as I,bb as y,aI as J,aK as $,aJ as w,bi as K}from"./chat-CUfIjAsy.js";const L={class:"dialog-footer"},S=P({__name:"FieldFormDialog",emits:["refresh"],setup(M,{expose:_,emit:k}){const i=["string","int","dict","array","float"],F=k,f=m(),q=m(!1),d=m(!1),a=m({name:"",type:i[0],desc:"",source:"reference",is_required:!0}),B=R({name:[{required:!0,message:T("views.tool.form.paramName.placeholder"),trigger:"blur"}]}),n=m(!1);h(n,l=>{l||(a.value={name:"",type:i[0],desc:"",source:"reference",is_required:!0},d.value=!1)});const C=l=>{l&&(a.value=K.cloneDeep(l),d.value=!0),n.value=!0},N=async l=>{l&&await l.validate(e=>{e&&(F("refresh",a.value),n.value=!1)})};return _({open:C}),(l,e)=>{const v=s("el-input"),u=s("el-form-item"),p=s("el-option"),b=s("el-select"),U=s("el-switch"),D=s("el-form"),c=s("el-button"),E=s("el-dialog");return g(),z(E,{title:d.value?l.$t("common.param.editParam"):l.$t("common.param.addParam"),modelValue:n.value,"onUpdate:modelValue":e[10]||(e[10]=o=>n.value=o),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":""},{footer:r(()=>[J("span",L,[t(c,{onClick:e[8]||(e[8]=y(o=>n.value=!1,["prevent"]))},{default:r(()=>[$(w(l.$t("common.cancel")),1)]),_:1}),t(c,{type:"primary",onClick:e[9]||(e[9]=o=>N(f.value)),loading:q.value},{default:r(()=>[$(w(d.value?l.$t("common.save"):l.$t("common.add")),1)]),_:1},8,["loading"])])]),default:r(()=>[t(D,{"label-position":"top",ref_key:"fieldFormRef",ref:f,rules:B,model:a.value,"require-asterisk-position":"right"},{default:r(()=>[t(u,{label:l.$t("views.tool.form.paramName.label"),prop:"name"},{default:r(()=>[t(v,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.name=o),placeholder:l.$t("views.tool.form.paramName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:e[1]||(e[1]=o=>a.value.name=a.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.dataType.label")},{default:r(()=>[t(b,{modelValue:a.value.type,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.type=o)},{default:r(()=>[(g(),G(H,null,I(i,o=>t(p,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(u,{label:l.$t("dynamicsForm.paramForm.tooltip.label")},{default:r(()=>[t(v,{modelValue:a.value.desc,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.desc=o),placeholder:l.$t("dynamicsForm.paramForm.tooltip.placeholder"),maxlength:128,"show-word-limit":"",onBlur:e[4]||(e[4]=o=>{var V;return a.value.desc=(V=a.value.desc)==null?void 0:V.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.source.label")},{default:r(()=>[t(b,{modelValue:a.value.source,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.source=o)},{default:r(()=>[t(p,{label:l.$t("views.tool.form.source.reference"),value:"reference"},null,8,["label"]),t(p,{label:l.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.required.label"),onClick:e[7]||(e[7]=y(()=>{},["prevent"]))},{default:r(()=>[t(U,{size:"small",modelValue:a.value.is_required,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.is_required=o)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}});export{S as _};
