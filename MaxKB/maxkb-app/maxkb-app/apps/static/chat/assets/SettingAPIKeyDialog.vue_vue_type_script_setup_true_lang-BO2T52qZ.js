import{bk as N,bu as h,bl as B,bj as O,ay as j,b8 as F,b7 as L,aB as m,be as M,aE as R,aD as u,aG as t,aH as n,bb as P,aI as U,aK as K,aJ as V,bc as x,bo as z,aC as G,aF as H}from"./chat-CUfIjAsy.js";const p="/system/api_key",J=()=>O(`${p}`),q=i=>B(`${p}`,{},void 0,i),E=(i,c)=>h(`${p}/${i}`,void 0,void 0,c),Q=(i,c,_)=>N(`${p}/${i}`,c,void 0,_),W={getAPIKey:J,postAPIKey:q,delAPIKey:E,putAPIKey:Q},X={class:"dialog-footer"},Z=j({__name:"SettingAPIKeyDialog",emits:["refresh"],setup(i,{expose:c,emit:_}){const g=F(),{params:{id:$}}=g,C=L(()=>g.path.includes("resource-management")?"systemManage":"workspace"),k=_,w=m(),s=m({allow_cross_domain:!1,cross_domain_list:""}),r=m(!1),f=m(!1),v=m(""),b=m("APPLICATION");M(r,o=>{o||(s.value={allow_cross_domain:!1,cross_domain_list:""})});const D=(o,e)=>{var d,l;v.value=o.id,b.value=e,s.value.allow_cross_domain=o.allow_cross_domain,s.value.cross_domain_list=(d=o.cross_domain_list)!=null&&d.length?(l=o.cross_domain_list)==null?void 0:l.join(`
`):"",r.value=!0},S=async o=>{o&&await o.validate((e,d)=>{if(e){const l={allow_cross_domain:s.value.allow_cross_domain,cross_domain_list:s.value.cross_domain_list?s.value.cross_domain_list.split(`
`).filter(function(y){return y!==""}):[]};(b.value==="APPLICATION"?x({type:"applicationKey",systemType:C.value}).putAPIKey($,v.value,l,f):W.putAPIKey(v.value,l,f)).then(()=>{k("refresh"),z(G("common.settingSuccess")),r.value=!1})}})};return c({open:D}),(o,e)=>{const d=u("el-switch"),l=u("el-form-item"),I=u("el-input"),y=u("el-form"),A=u("el-button"),T=u("el-dialog");return H(),R(T,{title:o.$t("common.setting"),modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=a=>r.value=a),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[U("span",X,[n(A,{onClick:e[3]||(e[3]=P(a=>r.value=!1,["prevent"]))},{default:t(()=>[K(V(o.$t("common.cancel")),1)]),_:1}),n(A,{type:"primary",onClick:e[4]||(e[4]=a=>S(w.value)),loading:f.value},{default:t(()=>[K(V(o.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[n(y,{"label-position":"top",ref_key:"settingFormRef",ref:w,model:s.value},{default:t(()=>[n(l,{label:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.allowCrossDomainLabel"),onClick:e[1]||(e[1]=P(()=>{},["prevent"]))},{default:t(()=>[n(d,{size:"small",modelValue:s.value.allow_cross_domain,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.allow_cross_domain=a)},null,8,["modelValue"])]),_:1},8,["label"]),n(l,null,{default:t(()=>[n(I,{modelValue:s.value.cross_domain_list,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.cross_domain_list=a),placeholder:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.crossDomainPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});export{Z as _,W as s};
