import{a$ as N,b9 as O,b0 as h,a_ as B,ay as F,aP as L,aO as M,aB as m,aV as R,aE as U,aD as u,aG as t,aH as n,aS as V,aI as j,aK as $,aJ as K,aT as x,b3 as z,aC as G,aF as H}from"./admin-Ca7cl6NN.js";const p="/system/api_key",J=()=>B(`${p}`),q=i=>h(`${p}`,{},void 0,i),E=(i,c)=>O(`${p}/${i}`,void 0,void 0,c),Q=(i,c,_)=>N(`${p}/${i}`,c,void 0,_),W={getAPIKey:J,postAPIKey:q,delAPIKey:E,putAPIKey:Q},X={class:"dialog-footer"},Z=F({__name:"SettingAPIKeyDialog",emits:["refresh"],setup(i,{expose:c,emit:_}){const g=L(),{params:{id:b}}=g,C=M(()=>g.path.includes("resource-management")?"systemManage":"workspace"),k=_,w=m(),s=m({allow_cross_domain:!1,cross_domain_list:""}),r=m(!1),f=m(!1),v=m(""),I=m("APPLICATION");R(r,o=>{o||(s.value={allow_cross_domain:!1,cross_domain_list:""})});const S=(o,e)=>{var d,a;v.value=o.id,I.value=e,s.value.allow_cross_domain=o.allow_cross_domain,s.value.cross_domain_list=(d=o.cross_domain_list)!=null&&d.length?(a=o.cross_domain_list)==null?void 0:a.join(`
`):"",r.value=!0},D=async o=>{o&&await o.validate((e,d)=>{if(e){const a={allow_cross_domain:s.value.allow_cross_domain,cross_domain_list:s.value.cross_domain_list?s.value.cross_domain_list.split(`
`).filter(function(y){return y!==""}):[]};(I.value==="APPLICATION"?x({type:"applicationKey",systemType:C.value}).putAPIKey(b,v.value,a,f):W.putAPIKey(v.value,a,f)).then(()=>{k("refresh"),z(G("common.settingSuccess")),r.value=!1})}})};return c({open:S}),(o,e)=>{const d=u("el-switch"),a=u("el-form-item"),A=u("el-input"),y=u("el-form"),P=u("el-button"),T=u("el-dialog");return H(),U(T,{title:o.$t("common.setting"),modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value=l),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[j("span",X,[n(P,{onClick:e[3]||(e[3]=V(l=>r.value=!1,["prevent"]))},{default:t(()=>[$(K(o.$t("common.cancel")),1)]),_:1}),n(P,{type:"primary",onClick:e[4]||(e[4]=l=>D(w.value)),loading:f.value},{default:t(()=>[$(K(o.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[n(y,{"label-position":"top",ref_key:"settingFormRef",ref:w,model:s.value},{default:t(()=>[n(a,{label:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.allowCrossDomainLabel"),onClick:e[1]||(e[1]=V(()=>{},["prevent"]))},{default:t(()=>[n(d,{size:"small",modelValue:s.value.allow_cross_domain,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.allow_cross_domain=l)},null,8,["modelValue"])]),_:1},8,["label"]),n(a,null,{default:t(()=>[n(A,{modelValue:s.value.cross_domain_list,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.cross_domain_list=l),placeholder:o.$t("views.applicationOverview.appInfo.SettingAPIKeyDialog.crossDomainPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});export{Z as _,W as s};
