import{ay as T,bv as O,aB as S,bw as U,b7 as q,be as z,aD as a,aE as f,aF as o,aG as s,aH as c,bf as _,bg as b,bh as v,bm as G,bx as H,aI as J,aJ as P,by as K,aK as j}from"./chat-CUfIjAsy.js";const Q={class:"ellipsis",style:{"max-width":"190px"}},ee=T({__name:"MemberFormContent",props:O({models:{},addText:{},keepOneLine:{type:Boolean},deleteButtonDisabled:{type:Function}},{form:{default:[]},formModifiers:{}}),emits:["update:form"],setup(h,{expose:F}){const t=h,i=S(),y={},r=U(h,"form"),N=q(()=>r.value.map(l=>l.role_id));function D(){r.value.push({...y})}z(()=>t.models,()=>{t.models.forEach(l=>{y[l.path]=[]})},{immediate:!0});function $(l){r.value.splice(l,1)}return F({validate:()=>{var l;return i.value?(l=i.value)==null?void 0:l.validate():Promise.resolve()},resetValidation:()=>{i.value&&i.value.clearValidate()}}),(l,Y)=>{const I=a("el-tooltip"),M=a("el-option"),A=a("el-select"),E=a("el-form-item"),k=a("AppIcon"),V=a("el-button"),L=a("el-scrollbar"),R=a("el-form");return o(),f(R,{model:r.value,ref_key:"formRef",ref:i,"label-position":"top","require-asterisk-position":"right"},{default:s(()=>[c(L,null,{default:s(()=>[(o(!0),_(b,null,v(r.value,(u,p)=>{var g;return o(),_("div",{key:p,class:"flex w-full"},[(o(!0),_(b,null,v(t.models,e=>(o(),f(E,{key:e.path,prop:`[${p}].${e.path}`,rules:e.rules,label:p===0&&e.label?e.label:"",class:"mr-8",style:{flex:"1"}},{default:s(()=>{var x,w,B,d,C;return[(x=e==null?void 0:e.hidden)!=null&&x.call(e,u)?G("",!0):(o(),f(A,H({key:0,modelValue:u[e.path],"onUpdate:modelValue":m=>u[e.path]=m,placeholder:((w=e.selectProps)==null?void 0:w.placeholder)??l.$t("common.selectPlaceholder"),clearable:(B=e.selectProps)!=null&&B.clearableFunction?(C=(d=e.selectProps)==null?void 0:d.clearableFunction)==null?void 0:C.call(d,u):!0,filterable:"",multiple:"","reserve-keyword":!1,style:{width:"100%"},"collapse-tags":"","collapse-tags-tooltip":""},{ref_for:!0},e.selectProps),{default:s(()=>{var m;return[(o(!0),_(b,null,v((m=e.selectProps)==null?void 0:m.options,n=>(o(),f(M,{key:n.value,label:n.label,value:n.value,disabled:N.value.includes(n.value)},{default:s(()=>[c(I,{effect:"dark",content:n.label,placement:"top","show-after":500},{default:s(()=>[J("div",Q,P(n.label),1)]),_:2},1032,["content"])]),_:2},1032,["label","value","disabled"]))),128))]}),_:2},1040,["modelValue","onUpdate:modelValue","placeholder","clearable"]))]}),_:2},1032,["prop","rules","label"]))),128)),c(V,{disabled:t.keepOneLine&&r.value.length===1||((g=t.deleteButtonDisabled)==null?void 0:g.call(t,u)),onClick:e=>$(p),text:"",style:K({"margin-top":p===0&&t.models.some(e=>e.label)?"32px":"2px"})},{default:s(()=>[c(k,{iconName:"app-delete"})]),_:1},8,["disabled","onClick","style"])])}),128))]),_:1}),c(V,{type:"primary",text:"",class:"mt-2",onClick:D},{default:s(()=>[c(k,{iconName:"app-add-outlined",class:"mr-4"}),j(" "+P(t.addText??l.$t("views.role.member.add")),1)]),_:1})]),_:1},8,["model"])}}});export{ee as _};
