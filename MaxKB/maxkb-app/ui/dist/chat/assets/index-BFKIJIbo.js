import{ay as Z,aB as m,bd as X,aC as i,be as me,aD as n,aE as y,aF as _,aG as o,aI as U,aH as e,aJ as v,bb as H,bm as j,bn as t,ci as Ae,bf as Y,bg as se,bh as te,aK as $,cO as Me,bo as W,aA as Ve,br as Re,bs as ue,bt as J,bZ as K,bY as D,b_ as P,c3 as Ee,bW as ae,c6 as de}from"./chat-CUfIjAsy.js";import{l as q,u as ce}from"./permission-api-DyNdOx42.js";import"./workspace-Cv2gXV-V.js";const Se={class:"title-decoration-1 mb-16 mt-8"},De={class:"mr-8"},Pe={class:"title-decoration-1 mb-16 mt-8"},Te=Z({__name:"UserDrawer",props:{title:{},optionLoading:{type:Boolean},chatGroupList:{}},emits:["refresh"],setup(Q,{expose:A,emit:k}){const T=Q,E=k,p=m(),r=m({username:"",email:"",password:"",phone:"",nick_name:"",user_group_ids:[]}),b=X({username:[{required:!0,message:i("views.login.loginForm.username.requiredMessage"),trigger:"blur"},{min:4,max:20,message:i("views.login.loginForm.username.lengthMessage"),trigger:"blur"}],nick_name:[{required:!0,message:i("views.userManage.userForm.nick_name.placeholder"),trigger:"blur"},{min:1,max:20,message:i("views.userManage.userForm.nick_name.lengthMessage"),trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:i("views.userManage.userForm.phone.invalidMessage"),trigger:"blur"}],user_group_ids:[{type:"array",required:!0,message:i("views.chatUser.group.requiredMessage"),trigger:"change"}]}),h=m(!1),f=m(!1),M=m(!1);me(h,s=>{var l;s||(r.value={username:"",email:"",password:"",phone:"",nick_name:"",user_group_ids:[]},M.value=!1,(l=p.value)==null||l.clearValidate())});const G=s=>{s?(r.value.id=s.id,r.value.username=s.username,r.value.email=s.email,r.value.phone=s.phone,r.value.nick_name=s.nick_name,r.value.user_group_ids=s.user_group_ids,M.value=!0):Me.getSystemDefaultPassword().then(l=>{r.value.password=l.data.password}),h.value=!0},N=async s=>{s&&await s.validate((l,c)=>{l&&(M.value?q("chatUser").putUserManage(r.value.id,r.value,f).then(()=>{E("refresh"),W(i("common.editSuccess")),h.value=!1}):q("chatUser").postUserManage(r.value,f).then(()=>{E("refresh"),W(i("common.createSuccess")),h.value=!1}))})};return A({open:G}),(s,l)=>{const c=n("el-input"),w=n("el-form-item"),F=n("AppIcon"),V=n("el-button"),S=n("el-option"),R=n("el-select"),L=n("el-form"),C=n("el-drawer");return _(),y(C,{modelValue:h.value,"onUpdate:modelValue":l[9]||(l[9]=d=>h.value=d),size:"60%"},{header:o(()=>[U("h4",null,v(T.title),1)]),footer:o(()=>[e(V,{onClick:l[7]||(l[7]=H(d=>h.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(V,{type:"primary",onClick:l[8]||(l[8]=d=>N(p.value)),loading:f.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])]),default:o(()=>[U("h4",Se,v(s.$t("common.info")),1),e(L,{ref_key:"userFormRef",ref:p,model:r.value,rules:b,"label-position":"top","require-asterisk-position":"right",onSubmit:l[6]||(l[6]=H(()=>{},["prevent"])),"close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[e(w,{prop:M.value?"":"username",label:s.$t("views.login.loginForm.username.label")},{default:o(()=>[e(c,{modelValue:r.value.username,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value.username=d),placeholder:s.$t("views.login.loginForm.username.placeholder"),maxlength:"20","show-word-limit":"",disabled:M.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["prop","label"]),e(w,{prop:"nick_name",label:s.$t("views.userManage.userForm.nick_name.label")},{default:o(()=>[e(c,{modelValue:r.value.nick_name,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value.nick_name=d),placeholder:s.$t("views.userManage.userForm.nick_name.placeholder"),maxlength:"20","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.login.loginForm.email.label"),prop:"email"},{default:o(()=>[e(c,{type:"email",modelValue:r.value.email,"onUpdate:modelValue":l[2]||(l[2]=d=>r.value.email=d),placeholder:s.$t("views.login.loginForm.email.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.userManage.userForm.phone.label"),prop:"phone"},{default:o(()=>[e(c,{modelValue:r.value.phone,"onUpdate:modelValue":l[3]||(l[3]=d=>r.value.phone=d),placeholder:s.$t("views.userManage.userForm.phone.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),M.value?j("",!0):(_(),y(w,{key:0,label:"默认密码"},{default:o(()=>[U("span",De,v(r.value.password),1),e(V,{type:"primary",link:"",onClick:l[4]||(l[4]=d=>t(Ae)(r.value.password))},{default:o(()=>[e(F,{iconName:"app-copy"})]),_:1})]),_:1})),U("h4",Pe,v(s.$t("views.chatUser.group.title")),1),e(w,{label:s.$t("views.chatUser.group.title"),prop:"user_group_ids"},{default:o(()=>[e(R,{modelValue:r.value.user_group_ids,"onUpdate:modelValue":l[5]||(l[5]=d=>r.value.user_group_ids=d),multiple:"",filterable:"",placeholder:`${s.$t("common.selectPlaceholder")}${s.$t("views.chatUser.group.title")}`,loading:T.optionLoading},{default:o(()=>[(_(!0),Y(se,null,te(T.chatGroupList,d=>(_(),y(S,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),Oe={class:"dialog-footer"},Fe=Z({__name:"UserPwdDialog",emits:["refresh"],setup(Q,{expose:A,emit:k}){const T=k,{user:E}=Ve(),p=m(),r=m({password:"",re_password:""}),b=X({password:[{required:!0,message:i("views.login.loginForm.new_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"}],re_password:[{required:!0,message:i("views.login.loginForm.re_password.requiredMessage"),trigger:"blur"},{min:6,max:20,message:i("views.login.loginForm.password.lengthMessage"),trigger:"blur"},{validator:(s,l,c)=>{p.value.password!=p.value.re_password?c(new Error(i("views.login.loginForm.re_password.validatorMessage"))):c()},trigger:"blur"}]}),h=m(!1),f=m(!1),M=m("");me(h,s=>{s||(r.value={password:"",re_password:""})});const G=s=>{var l;M.value=s.id,h.value=!0,(l=p.value)==null||l.clearValidate()},N=async s=>{s&&await s.validate((l,c)=>{l&&q("chatUser").putUserManagePassword(M.value,r.value,f).then(()=>{T("refresh"),E.profile(),W(i("views.userManage.tip.updatePwdSuccess")),h.value=!1})})};return A({open:G}),(s,l)=>{const c=n("el-input"),w=n("el-form-item"),F=n("el-form"),V=n("el-button"),S=n("el-dialog");return _(),y(S,{title:s.$t("views.login.resetPassword"),modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=R=>h.value=R)},{footer:o(()=>[U("span",Oe,[e(V,{onClick:l[3]||(l[3]=H(R=>h.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(V,{type:"primary",onClick:l[4]||(l[4]=R=>N(p.value)),loading:f.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(F,{ref_key:"userFormRef",ref:p,model:r.value,rules:b,"label-position":"top","require-asterisk-position":"right",onSubmit:l[2]||(l[2]=H(()=>{},["prevent"])),"close-on-click-modal":!1,"close-on-press-escape":!1},{default:o(()=>[e(w,{label:s.$t("views.login.loginForm.new_password.label"),prop:"password"},{default:o(()=>[e(c,{type:"password",modelValue:r.value.password,"onUpdate:modelValue":l[0]||(l[0]=R=>r.value.password=R),placeholder:s.$t("views.login.loginForm.new_password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:s.$t("views.login.loginForm.re_password.label"),prop:"re_password"},{default:o(()=>[e(c,{type:"password",modelValue:r.value.re_password,"onUpdate:modelValue":l[1]||(l[1]=R=>r.value.re_password=R),placeholder:s.$t("views.login.loginForm.re_password.placeholder"),"show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])}}}),Le={class:"dialog-footer"},Ge=Z({__name:"SetUserGroupsDialog",props:{optionLoading:{type:Boolean},chatGroupList:{}},emits:["refresh"],setup(Q,{expose:A,emit:k}){const T=Q,E=k,p=m(!1),r={user_group_ids:[],is_append:!0,ids:[]},b=m({...r});function h(s){b.value={...r,ids:s},p.value=!0}const f=m(),M=X({user_group_ids:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}],is_append:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}]}),G=m(!1),N=async s=>{s&&await s.validate(l=>{l&&q("chatUser").batchAddGroup(b.value,G).then(()=>{W(i("common.settingSuccess")),E("refresh"),p.value=!1})})};return A({open:h}),(s,l)=>{const c=n("el-radio"),w=n("el-radio-group"),F=n("el-form-item"),V=n("el-option"),S=n("el-select"),R=n("el-form"),L=n("el-button"),C=n("el-dialog");return _(),y(C,{width:"600",title:s.$t("views.chatUser.setUserGroups"),modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=d=>p.value=d),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0},{footer:o(()=>[U("span",Le,[e(L,{onClick:l[2]||(l[2]=H(d=>p.value=!1,["prevent"]))},{default:o(()=>[$(v(s.$t("common.cancel")),1)]),_:1}),e(L,{type:"primary",onClick:l[3]||(l[3]=d=>N(f.value)),loading:G.value},{default:o(()=>[$(v(s.$t("common.save")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(R,{"label-position":"top",ref_key:"formRef",ref:f,rules:M,model:b.value,"require-asterisk-position":"right"},{default:o(()=>[e(F,{label:s.$t("views.chatUser.settingMethod"),prop:"user_group_ids"},{default:o(()=>[e(w,{modelValue:b.value.is_append,"onUpdate:modelValue":l[0]||(l[0]=d=>b.value.is_append=d)},{default:o(()=>[e(c,{value:!0},{default:o(()=>[$(v(s.$t("views.chatUser.append")),1)]),_:1}),e(c,{value:!1},{default:o(()=>[$(v(s.$t("views.applicationOverview.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(F,{label:s.$t("views.chatUser.group.title"),prop:"user_group_ids"},{default:o(()=>[e(S,{modelValue:b.value.user_group_ids,"onUpdate:modelValue":l[1]||(l[1]=d=>b.value.user_group_ids=d),multiple:"",filterable:"",placeholder:s.$t("common.selectPlaceholder"),loading:T.optionLoading},{default:o(()=>[(_(!0),Y(se,null,te(T.chatGroupList,d=>(_(),y(V,{key:d.id,label:d.name,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),Ne={class:"mb-8 medium"},Ie={class:"color-secondary lighter"},He={class:"dialog-footer"},qe=Z({__name:"SyncUsersDialog",emits:["refresh"],setup(Q,{expose:A,emit:k}){const T=m([{label:i("views.userManage.source.local"),value:"LOCAL"},{label:i("views.system.authentication.scanTheQRCode.wecom"),value:"wecom"},{label:"LDAP",value:"LDAP"},{label:i("views.system.authentication.scanTheQRCode.lark"),value:"lark"}]),E=k,p=m(!1),r={sync_type:"LOCAL"},b=m({...r});function h(){b.value={...r},f(),p.value=!0}async function f(){return ce.getSyncType().then(l=>{l.data&&l.data.length>0&&(T.value=T.value.filter(c=>l.data.includes(c.value)))})}const M=m(),G=X({sync_type:[{required:!0,message:i("common.selectPlaceholder"),trigger:"blur"}]}),N=m(!1),s=async l=>{l&&await l.validate(c=>{c&&ce.batchSync(b.value.sync_type,N).then(w=>{if(w.data){const F=w.data.success_count;let V="";w.data.conflict_users&&w.data.conflict_users.length>0&&w.data.conflict_users.forEach(S=>{S.type==="username"&&(V+=`

`+i("views.chatUser.syncMessage.usernameExist")+" [ "+S.users.join(",")+`
 ]`),S.type==="nick_name"&&(V+=`

`+i("views.chatUser.syncMessage.nicknameExist")+" [ "+S.users.join(",")+`
 ]`)}),W(i("views.chatUser.syncMessage.title",{count:F})+V),E("refresh"),p.value=!1}})})};return A({open:h}),(l,c)=>{const w=n("el-option"),F=n("el-select"),V=n("el-form-item"),S=n("el-form"),R=n("el-button"),L=n("el-dialog");return _(),y(L,{modelValue:p.value,"onUpdate:modelValue":c[3]||(c[3]=C=>p.value=C),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,width:"600"},{header:o(()=>[U("h4",Ne,v(t(i)("views.chatUser.syncUsers")),1),U("div",Ie,v(t(i)("views.chatUser.syncUsersTip")),1)]),footer:o(()=>[U("span",He,[e(R,{onClick:c[1]||(c[1]=H(C=>p.value=!1,["prevent"]))},{default:o(()=>[$(v(l.$t("common.cancel")),1)]),_:1}),e(R,{type:"primary",onClick:c[2]||(c[2]=C=>s(M.value)),loading:N.value},{default:o(()=>[$(v(l.$t("common.sync")),1)]),_:1},8,["loading"])])]),default:o(()=>[e(S,{"label-position":"top",ref_key:"formRef",ref:M,rules:G,model:b.value,"require-asterisk-position":"right"},{default:o(()=>[e(V,{label:l.$t("views.userManage.source.label"),prop:"sync_type"},{default:o(()=>[e(F,{modelValue:b.value.sync_type,"onUpdate:modelValue":c[0]||(c[0]=C=>b.value.sync_type=C),placeholder:l.$t("common.selectPlaceholder")},{default:o(()=>[(_(!0),Y(se,null,te(T.value,C=>(_(),y(w,{key:C.value,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])}}}),Ke={class:"chat-user p-24"},We={class:"ml-4 color-text-primary"},Be={class:"flex-between mb-16"},ze={class:"flex-between complex-search"},je={key:0,class:"flex align-center"},Qe={class:"color-text-primary"},Ye={key:1,class:"flex align-center"},Je={class:"color-text-primary"},Ze={class:"mr-8"},Xe={class:"mr-8"},al=Z({__name:"index",setup(Q){const A=m("username"),k=m({username:"",nick_name:"",source:"",is_active:null}),T=()=>{k.value={username:"",nick_name:"",source:"",is_active:null}},E=m(!1),p=m([]);function r(a){p.value=a}const b=X({current_page:1,page_size:20,total:0}),h=m([]);function f(){const a={},g=k.value[A.value];return g!=null&&g!==""&&(a[A.value]=g),q("chatUser").getUserManage(b,a,E).then(B=>{h.value=B.data.records,b.total=B.data.total})}const M=m("");function G({prop:a,order:g}){M.value=g==="ascending"?a:`-${a}`,f()}function N(){b.current_page=1,f()}async function s(a){const g={...a,is_active:!a.is_active},B=g.is_active?i("common.status.enableSuccess"):i("common.status.disableSuccess");await q("chatUser").putUserManage(a.id,g,E).then(()=>(f(),W(B),!0)).catch(()=>!1)}const l=m(""),c=m();function w(a){l.value=i("views.userManage.editUser"),c.value.open(a)}function F(){l.value=i("views.userManage.createUser"),c.value.open()}function V(a){de(`${i("views.userManage.delete.confirmTitle")}${a.nick_name} ?`,"",{confirmButtonText:i("common.confirm"),confirmButtonClass:"danger"}).then(()=>{E.value=!0,q("chatUser").delUserManage(a.id,E).then(()=>{W(i("common.deleteSuccess")),f()})}).catch(()=>{})}const S=m();function R(a){S.value.open(a)}function L(){f()}Re(()=>{pe(),f()});const C=m(!1),d=m([]);async function pe(){try{const a=await q("userGroup").getUserGroup(C);d.value=a.data}catch(a){console.error(a)}}function ve(){de(i("views.chatUser.batchDeleteUser",{count:p.value.length}),"",{confirmButtonText:i("common.confirm"),confirmButtonClass:"danger"}).then(()=>{q("chatUser").batchDelete(p.value.map(a=>a.id),E).then(async()=>{W(i("common.deleteSuccess")),await f()})}).catch(()=>{})}const ne=m();function _e(){var a;(a=ne.value)==null||a.open(p.value.map(g=>g.id))}const re=m();function ge(){var a;(a=re.value)==null||a.open()}return(a,g)=>{const B=n("el-breadcrumb-item"),fe=n("el-breadcrumb"),z=n("el-button"),O=n("el-option"),oe=n("el-select"),ie=n("el-input"),I=n("el-table-column"),be=n("SuccessFilled"),he=n("el-icon"),x=n("AppIcon"),we=n("TagGroup"),ye=n("el-switch"),Ue=n("el-divider"),$e=n("app-table"),ke=n("el-card"),ee=ue("hasPermission"),Ce=ue("loading");return _(),Y("div",Ke,[e(fe,{"separator-icon":"ArrowRight",class:"mb-16"},{default:o(()=>[e(B,null,{default:o(()=>[$(v(t(i)("views.chatUser.title")),1)]),_:1}),e(B,null,{default:o(()=>[U("h5",We,v(t(i)("views.chatUser.title")),1)]),_:1})]),_:1}),e(ke,{style:{height:"calc(var(--app-main-height) + 10px)"}},{default:o(()=>[U("div",Be,[U("div",null,[J((_(),y(z,{type:"primary",onClick:g[0]||(g[0]=u=>F())},{default:o(()=>[$(v(t(i)("views.userManage.createUser")),1)]),_:1})),[[ee,new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_CREATE,t(P).WORKSPACE_CHAT_USER_CREATE],[],"OR")]]),J((_(),y(z,{onClick:ge},{default:o(()=>[$(v(a.$t("views.chatUser.syncUsers")),1)]),_:1})),[[ee,new(t(K))([t(D).ADMIN],[t(P).CHAT_USER_SYNC],[],"OR")]]),J((_(),y(z,{disabled:p.value.length===0,onClick:_e},{default:o(()=>[$(v(a.$t("views.chatUser.setUserGroups")),1)]),_:1},8,["disabled"])),[[ee,new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_GROUP,t(P).WORKSPACE_CHAT_USER_GROUP],[],"OR")]]),J((_(),y(z,{disabled:p.value.length===0,onClick:ve},{default:o(()=>[$(v(a.$t("common.delete")),1)]),_:1},8,["disabled"])),[[ee,new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).WORKSPACE_CHAT_USER_DELETE,t(P).CHAT_USER_DELETE],[],"OR")]])]),U("div",ze,[e(oe,{class:"complex-search__left",modelValue:A.value,"onUpdate:modelValue":g[1]||(g[1]=u=>A.value=u),style:{width:"120px"},onChange:T},{default:o(()=>[e(O,{label:a.$t("views.login.loginForm.username.label"),value:"username"},null,8,["label"]),e(O,{label:a.$t("views.userManage.userForm.nick_name.label"),value:"nick_name"},null,8,["label"]),e(O,{label:a.$t("common.status.label"),value:"is_active"},null,8,["label"]),e(O,{label:a.$t("views.userManage.source.label"),value:"source"},null,8,["label"])]),_:1},8,["modelValue"]),A.value==="username"?(_(),y(ie,{key:0,modelValue:k.value.username,"onUpdate:modelValue":g[2]||(g[2]=u=>k.value.username=u),onChange:f,style:{width:"220px"},clearable:""},null,8,["modelValue"])):j("",!0),A.value==="nick_name"?(_(),y(ie,{key:1,modelValue:k.value.nick_name,"onUpdate:modelValue":g[3]||(g[3]=u=>k.value.nick_name=u),onChange:f,style:{width:"220px"},clearable:""},null,8,["modelValue"])):A.value==="is_active"?(_(),y(oe,{key:2,modelValue:k.value.is_active,"onUpdate:modelValue":g[4]||(g[4]=u=>k.value.is_active=u),onChange:f,clearable:"",style:{width:"220px"}},{default:o(()=>[e(O,{label:a.$t("common.status.enabled"),value:!0},null,8,["label"]),e(O,{label:a.$t("common.status.disabled"),value:!1},null,8,["label"])]),_:1},8,["modelValue"])):A.value==="source"?(_(),y(oe,{key:3,modelValue:k.value.source,"onUpdate:modelValue":g[5]||(g[5]=u=>k.value.source=u),onChange:f,style:{width:"220px"},clearable:"",placeholder:a.$t("common.inputPlaceholder")},{default:o(()=>[e(O,{label:a.$t("views.userManage.source.local"),value:"LOCAL"},null,8,["label"]),e(O,{label:"CAS",value:"CAS"}),e(O,{label:"LDAP",value:"LDAP"}),e(O,{label:"OIDC",value:"OIDC"}),e(O,{label:"OAuth2",value:"OAuth2"}),e(O,{label:a.$t("views.userManage.source.wecom"),value:"wecom"},null,8,["label"]),e(O,{label:a.$t("views.userManage.source.lark"),value:"lark"},null,8,["label"]),e(O,{label:a.$t("views.userManage.source.dingtalk"),value:"dingtalk"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])):j("",!0)])]),J((_(),y($e,{class:"mt-16",data:h.value,"pagination-config":b,onSizeChange:N,onChangePage:f,onSelectionChange:r,onSortChange:G,maxTableHeight:270},{default:o(()=>[e(I,{type:"selection",width:"55"}),e(I,{prop:"nick_name",label:a.$t("views.userManage.userForm.nick_name.label"),"min-width":"180","show-overflow-tooltip":""},null,8,["label"]),e(I,{prop:"username",label:a.$t("common.username"),"min-width":"180","show-overflow-tooltip":""},null,8,["label"]),e(I,{prop:"is_active",label:a.$t("common.status.label"),width:"100"},{default:o(({row:u})=>[u.is_active?(_(),Y("div",je,[e(he,{class:"color-success mr-8",style:{"font-size":"16px"}},{default:o(()=>[e(be)]),_:1}),U("span",Qe,v(a.$t("common.status.enabled")),1)])):(_(),Y("div",Ye,[e(x,{iconName:"app-disabled",class:"color-secondary mr-8"}),U("span",Je,v(a.$t("common.status.disabled")),1)]))]),_:1},8,["label"]),e(I,{prop:"email",label:a.$t("views.login.loginForm.email.label"),"show-overflow-tooltip":"","min-width":"180"},{default:o(({row:u})=>[$(v(u.email||"-"),1)]),_:1},8,["label"]),e(I,{prop:"phone",label:a.$t("views.userManage.userForm.phone.label"),width:"120"},{default:o(({row:u})=>[$(v(u.phone||"-"),1)]),_:1},8,["label"]),e(I,{prop:"user_group_names",label:a.$t("views.chatUser.group.title"),"min-width":"150"},{default:o(({row:u})=>[e(we,{tags:u.user_group_names},null,8,["tags"])]),_:1},8,["label"]),e(I,{prop:"source",label:a.$t("views.userManage.source.label")},{default:o(({row:u})=>[$(v(u.source==="LOCAL"?a.$t("views.userManage.source.localCreate"):u.source==="wecom"?a.$t("views.userManage.source.wecom"):u.source==="lark"?a.$t("views.userManage.source.lark"):u.source==="dingtalk"?a.$t("views.userManage.source.dingtalk"):u.source==="OAUTH2"||u.source==="OAuth2"?"OAuth2":u.source),1)]),_:1},8,["label"]),e(I,{label:a.$t("common.createTime"),width:"180"},{default:o(({row:u})=>[$(v(t(Ee)(u.create_time)),1)]),_:1},8,["label"]),e(I,{label:a.$t("common.operation"),width:"160",align:"left",fixed:"right"},{default:o(({row:u})=>[U("span",{onClick:g[6]||(g[6]=H(()=>{},["stop"]))},[t(ae)(new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_EDIT,t(P).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(_(),y(ye,{key:0,size:"small",modelValue:u.is_active,"onUpdate:modelValue":le=>u.is_active=le,"before-change":()=>s(u)},null,8,["modelValue","onUpdate:modelValue","before-change"])):j("",!0)]),e(Ue,{direction:"vertical"}),U("span",Ze,[t(ae)(new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_EDIT,t(P).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(_(),y(z,{key:0,type:"primary",text:"",onClick:H(le=>w(u),["stop"]),title:a.$t("common.edit")},{default:o(()=>[e(x,{iconName:"app-edit"})]),_:1},8,["onClick","title"])):j("",!0)]),U("span",Xe,[t(ae)(new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_EDIT,t(P).WORKSPACE_CHAT_USER_EDIT],[],"OR"),"OR")?(_(),y(z,{key:0,type:"primary",text:"",onClick:H(le=>R(u),["stop"]),title:a.$t("views.userManage.setting.updatePwd")},{default:o(()=>[e(x,{iconName:"app-key"})]),_:1},8,["onClick","title"])):j("",!0)]),U("span",null,[t(ae)(new(t(K))([t(D).ADMIN,t(D).WORKSPACE_MANAGE],[t(P).CHAT_USER_DELETE,t(P).WORKSPACE_CHAT_USER_DELETE],[],"OR"),"OR")?(_(),y(z,{key:0,disabled:u.role==="ADMIN",type:"primary",text:"",onClick:H(le=>V(u),["stop"]),title:a.$t("common.delete")},{default:o(()=>[e(x,{iconName:"app-delete"})]),_:1},8,["disabled","onClick","title"])):j("",!0)])]),_:1},8,["label"])]),_:1},8,["data","pagination-config"])),[[Ce,E.value]])]),_:1}),e(Te,{title:l.value,optionLoading:C.value,chatGroupList:d.value,ref_key:"UserDrawerRef",ref:c,onRefresh:L},null,8,["title","optionLoading","chatGroupList"]),e(Fe,{ref_key:"UserPwdDialogRef",ref:S,onRefresh:L},null,512),e(Ge,{optionLoading:C.value,chatGroupList:d.value,ref_key:"setUserGroupsRef",ref:ne,onRefresh:L},null,8,["optionLoading","chatGroupList"]),e(qe,{ref_key:"syncUsersDialogRef",ref:re,onRefresh:L},null,512)])}}});export{al as default};
