import{ay as Q,b7 as E,aD as r,bf as V,aF as m,aI as o,aH as e,aJ as i,aG as t,aK as d,ce as W,aA as re,az as de,cD as ue,aB as y,aC as $,bd as me,br as ce,d2 as q,bi as S,bs as K,bt as J,bn as L,bm as z,bg as he,bh as pe,aE as C,bb as _e,cf as fe,bZ as ve,bY as ge,b_ as be,c7 as we,d3 as ye,d4 as Y,d5 as $e,bo as Ve}from"./chat-CUfIjAsy.js";import{a as ke,L as Te}from"./LoginContainer-psUSKFMj.js";const xe="data:image/svg+xml,%3csvg%20id='图层_1'%20data-name='图层%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20232.4409%20232.4409'%3e%3cdefs%3e%3cstyle%3e%20.cls-1{fill:url(%23未命名的渐变_7);}.cls-2{fill:url(%23未命名的渐变_7-2);}.cls-3{fill:url(%23未命名的渐变_7-3);}.cls-4{fill:url(%23未命名的渐变_7-4);}.cls-5{fill:url(%23未命名的渐变_7-5);}.cls-6{fill:url(%23未命名的渐变_7-6);}%3c/style%3e%3clinearGradient%20id='未命名的渐变_7'%20x1='113.6159'%20y1='176.9998'%20x2='113.6159'%20y2='195.8629'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0'%20stop-color='%233370FF'%20/%3e%3cstop%20offset='1'%20stop-color='%237f3bf5'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='未命名的渐变_7-2'%20x1='209.3027'%20y1='90.7042'%20x2='209.3027'%20y2='131.8553'%20xlink:href='%23未命名的渐变_7'%20/%3e%3clinearGradient%20id='未命名的渐变_7-3'%20x1='23.1384'%20y1='90.7042'%20x2='23.1384'%20y2='131.8553'%20xlink:href='%23未命名的渐变_7'%20/%3e%3clinearGradient%20id='未命名的渐变_7-4'%20x1='138.8087'%20y1='96.1512'%20x2='138.8087'%20y2='118.7847'%20xlink:href='%23未命名的渐变_7'%20/%3e%3clinearGradient%20id='未命名的渐变_7-5'%20x1='95.3622'%20y1='96.1512'%20x2='95.3622'%20y2='118.7847'%20xlink:href='%23未命名的渐变_7'%20/%3e%3clinearGradient%20id='未命名的渐变_7-6'%20x1='116.2206'%20y1='48.8968'%20x2='116.2206'%20y2='173.4002'%20xlink:href='%23未命名的渐变_7'%20/%3e%3c/defs%3e%3ctitle%3eMaxKB%3c/title%3e%3cpath%20class='cls-1'%20d='M128.4532,177H98.7785L87.78,187.9985a4.6069,4.6069,0,0,0,3.2576,7.8644h45.1569a4.6069,4.6069,0,0,0,3.2575-7.8644Z'%20/%3e%3cpath%20class='cls-2'%20d='M210.0008,90.7042h-5.85v41.1511h5.85a4.4537,4.4537,0,0,0,4.4537-4.4537V95.1579A4.4537,4.4537,0,0,0,210.0008,90.7042Z'%20/%3e%3cpath%20class='cls-3'%20d='M28.29,90.7042H22.44a4.4538,4.4538,0,0,0-4.4538,4.4537v32.2437a4.4538,4.4538,0,0,0,4.4538,4.4537h5.85Z'%20/%3e%3cpath%20class='cls-4'%20d='M138.8087,96.1512a8.33,8.33,0,0,0-8.33,8.33v5.9727a8.33,8.33,0,1,0,16.6607,0v-5.9727A8.33,8.33,0,0,0,138.8087,96.1512Z'%20/%3e%3cpath%20class='cls-5'%20d='M95.3622,96.1512a8.33,8.33,0,0,0-8.33,8.33v5.9727a8.33,8.33,0,1,0,16.6607,0v-5.9727A8.33,8.33,0,0,0,95.3622,96.1512Z'%20/%3e%3cpath%20class='cls-6'%20d='M166.8344,48.8968H65.6064A33.7544,33.7544,0,0,0,31.89,82.6131v57.07A33.7548,33.7548,0,0,0,65.6064,173.4h101.228a33.7549,33.7549,0,0,0,33.7168-33.7168v-57.07A33.7545,33.7545,0,0,0,166.8344,48.8968Zm2.831,90.4457a6.0733,6.0733,0,0,1-6.0732,6.0733H114.2168a43.5922,43.5922,0,0,0-21.3313,5.5757l-16.5647,9.2946v-14.87h-7.472a6.0733,6.0733,0,0,1-6.0733-6.0733v-60.5a6.0733,6.0733,0,0,1,6.0733-6.0733h94.7434a6.0733,6.0733,0,0,1,6.0732,6.0733Z'%20/%3e%3c/svg%3e",Pe={class:"login-preview mr-16 white-bg"},Ue={class:"header"},Le={class:"tag flex-between"},Ce={class:"flex align-center"},Me=["src"],De={key:1,src:xe,height:"24px",class:"mr-8"},Ae={class:"ellipsis"},Fe={class:"mb-24"},Se={class:"mb-24"},ze={class:"mb-24"},Re={class:"operate-container flex-between mt-12"},Ne=Q({__name:"LoginPreview",props:{data:{type:Object,default:null}},setup(M){const u=M,c=E(()=>u.data.icon?typeof u.data.icon=="string"?u.data.icon:URL.createObjectURL(u.data.icon):"");return(p,k)=>{const D=r("Close"),b=r("el-icon"),a=r("el-input"),_=r("el-form-item"),T=r("el-form"),A=r("el-button");return m(),V("div",Pe,[o("div",Ue,[o("div",Le,[o("div",Ce,[u.data.icon?(m(),V("img",{key:0,src:c.value,alt:"",height:"20px",class:"mr-8"},null,8,Me)):(m(),V("img",De)),o("span",Ae,i(M.data.title),1)]),e(b,null,{default:t(()=>[e(D)]),_:1})])]),e(ke,{style:{height:"530px"},lang:!1},{default:t(()=>[e(Te,{subTitle:M.data.slogan,class:"login-container"},{default:t(()=>[k[0]||(k[0]=o("div",{class:"mask"},null,-1)),o("h2",Fe,i(p.$t("views.login.title")),1),e(T,{class:"login-form"},{default:t(()=>[o("div",Se,[e(_,null,{default:t(()=>[e(a,{size:"large",class:"input-item",placeholder:p.$t("views.login.loginForm.username.placeholder")},null,8,["placeholder"])]),_:1})]),o("div",ze,[e(_,null,{default:t(()=>[e(a,{type:"password",size:"large",class:"input-item",placeholder:p.$t("views.login.loginForm.password.placeholder"),"show-password":""},null,8,["placeholder"])]),_:1})])]),_:1}),e(A,{size:"large",type:"primary",class:"w-full"},{default:t(()=>[d(i(p.$t("views.login.buttons.login")),1)]),_:1}),o("div",Re,[e(A,{class:"forgot-password",link:"",type:"primary"},{default:t(()=>[d(i(p.$t("views.login.forgotPassword"))+"? ",1)]),_:1})])]),_:1},8,["subTitle"])]),_:1})])}}}),Ie=W(Ne,[["__scopeId","data-v-2077f61a"]]),je={class:"theme-setting p-16-24"},Be={class:"ml-4 color-text-primary"},Ge={class:"mb-16"},Ee={key:0},Ze={class:"mt-16 mb-8"},He={class:"mb-16"},Oe={class:"flex-between"},qe={class:"mb-16"},Ke={class:"theme-preview"},Je={class:"theme-form"},Ye={class:"flex-between mb-8"},Qe={class:"lighter"},We={class:"flex-between mb-8"},Xe={class:"lighter"},el={class:"flex-between mb-8"},ll={class:"lighter"},tl={class:"mt-16"},ol={class:"mb-16"},al={class:"flex-between"},sl={class:"mb-16"},nl={class:"theme-preview"},il={class:"theme-platform mr-16"},rl={class:"flex-center h-full"},dl={class:"app-title-container cursor"},ul={class:"logo flex-center"},ml={class:"flex-center"},cl={class:"theme-form"},hl={class:"ml-24"},pl={class:"mt-4"},_l={class:"ml-24"},fl={class:"mt-4"},vl={class:"ml-24"},gl={class:"mt-16"},bl={class:"theme-setting__operate w-full p-16-24"},wl=Q({__name:"index",setup(M){const{theme:u}=re();de(),ue((l,s)=>{u.setTheme(b.value)});const c=E(()=>u.themeInfo),p=E(()=>u.isDefaultTheme()),k=y(),D=y(!1),b=y(null),a=y({theme:"",icon:"",loginLogo:"",loginImage:"",title:"MaxKB",slogan:$("theme.defaultSlogan"),...Y}),_=y(""),T=y(""),A=me({title:[{required:!0,message:$("theme.websiteNamePlaceholder"),trigger:"blur"}],slogan:[{required:!0,message:$("theme.websiteSloganPlaceholder"),trigger:"blur"}]}),R=(l,s,w)=>{if((l==null?void 0:l.size)/1024/1024<10)a.value[w]=l.raw;else return we($("theme.fileMessageError")),!1;u.setTheme(a.value)};function X(l){l!=="custom"&&(a.value.theme=l,u.setTheme(a.value))}function ee(l){a.value.theme=l,u.setTheme(a.value)}function le(){u.setTheme(b.value),a.value=S.cloneDeep(c.value)}function Z(l){a.value=l==="login"?{...a.value,theme:a.value.theme,...ye}:{...a.value,theme:a.value.theme,...Y},u.setTheme(a.value)}const te=async(l,s)=>{l&&await l.validate((w,N)=>{if(w){const x=new FormData;Object.keys(a.value).map(P=>{x.append(P,a.value[P])}),$e.postThemeInfo(x,D).then(P=>{u.theme(),b.value=S.cloneDeep(a.value),Ve($("theme.saveSuccess"))})}})};return ce(()=>{c.value&&(_.value=q.some(l=>l.value===c.value.theme)?c.value.theme:"custom",T.value=c.value.theme,a.value=S.cloneDeep(c.value),b.value=S.cloneDeep(c.value))}),(l,s)=>{const w=r("el-breadcrumb-item"),N=r("el-breadcrumb"),x=r("el-radio-button"),P=r("el-radio-group"),oe=r("el-color-picker"),h=r("el-card"),f=r("el-button"),F=r("el-col"),I=r("el-upload"),v=r("el-text"),U=r("el-input"),H=r("el-form-item"),ae=r("el-form"),O=r("el-row"),j=r("el-scrollbar"),se=r("LogoFull"),B=r("AppIcon"),G=r("el-checkbox"),ne=K("hasPermission"),ie=K("loading");return J((m(),V("div",je,[e(N,{"separator-icon":"ArrowRight",class:"mb-16"},{default:t(()=>[e(w,null,{default:t(()=>[d(i(L($)("views.system.subTitle")),1)]),_:1}),e(w,null,{default:t(()=>[o("h5",Be,i(l.$t("theme.title")),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(h,{style:{"--el-card-padding":"16px"}},{default:t(()=>[o("h5",Ge,i(l.$t("theme.platformDisplayTheme")),1),e(P,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),class:"app-radio-button-group",onChange:X},{default:t(()=>[(m(!0),V(he,null,pe(L(q),(n,g)=>(m(),C(x,{key:g,label:n.label,value:n.value},null,8,["label","value"]))),128)),e(x,{label:l.$t("theme.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"]),_.value==="custom"?(m(),V("div",Ee,[o("h5",Ze,i(l.$t("theme.customTheme")),1),e(oe,{modelValue:T.value,"onUpdate:modelValue":s[1]||(s[1]=n=>T.value=n),onChange:ee},null,8,["modelValue"])])):z("",!0)]),_:1}),e(h,{style:{"--el-card-padding":"16px"},class:"mt-16"},{default:t(()=>[o("h5",He,i(l.$t("theme.platformLoginSettings")),1),e(h,{shadow:"never",class:"layout-bg"},{default:t(()=>[o("div",Oe,[o("h5",qe,i(l.$t("theme.pagePreview")),1),e(f,{type:"primary",link:"",onClick:s[2]||(s[2]=n=>Z("login"))},{default:t(()=>[d(i(l.$t("theme.restoreDefaults")),1)]),_:1})]),e(j,null,{default:t(()=>[o("div",Ke,[e(O,{gutter:8},{default:t(()=>[e(F,{span:16},{default:t(()=>[e(Ie,{data:a.value},null,8,["data"])]),_:1}),e(F,{span:8},{default:t(()=>[o("div",Je,[e(h,{shadow:"never",class:"mb-8"},{default:t(()=>[o("div",Ye,[o("span",Qe,i(l.$t("theme.websiteLogo")),1),e(I,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,g)=>R(n,g,"icon")},{default:t(()=>[e(f,{size:"small"},{default:t(()=>[d(i(l.$t("theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(v,{type:"info",size:"small"},{default:t(()=>[d(i(l.$t("theme.websiteLogoTip")),1)]),_:1})]),_:1}),e(h,{shadow:"never",class:"mb-8"},{default:t(()=>[o("div",We,[o("span",Xe,i(l.$t("theme.loginLogo")),1),e(I,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,g)=>R(n,g,"loginLogo")},{default:t(()=>[e(f,{size:"small"},{default:t(()=>[d(i(l.$t("theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(v,{type:"info",size:"small"},{default:t(()=>[d(i(l.$t("theme.loginLogoTip")),1)]),_:1})]),_:1}),e(h,{shadow:"never",class:"mb-8"},{default:t(()=>[o("div",el,[o("span",ll,i(l.$t("theme.loginBackground")),1),e(I,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(n,g)=>R(n,g,"loginImage")},{default:t(()=>[e(f,{size:"small"},{default:t(()=>[d(i(l.$t("theme.replacePicture")),1)]),_:1})]),_:1},8,["on-change"])]),e(v,{type:"info",size:"small"},{default:t(()=>[d(i(l.$t("theme.loginBackgroundTip")),1)]),_:1})]),_:1}),e(ae,{ref_key:"themeFormRef",ref:k,model:a.value,"label-position":"top","require-asterisk-position":"right",rules:A,onSubmit:s[5]||(s[5]=_e(()=>{},["prevent"]))},{default:t(()=>[e(H,{label:l.$t("theme.websiteName"),prop:"title"},{default:t(()=>[e(U,{modelValue:a.value.title,"onUpdate:modelValue":s[3]||(s[3]=n=>a.value.title=n),placeholder:l.$t("theme.websiteNamePlaceholder"),"show-word-limit":"",maxlength:"128"},null,8,["modelValue","placeholder"]),e(v,{type:"info"},{default:t(()=>[d(i(l.$t("theme.websiteNameTip")),1)]),_:1})]),_:1},8,["label"]),e(H,{label:l.$t("theme.websiteSlogan"),prop:"slogan"},{default:t(()=>[e(U,{modelValue:a.value.slogan,"onUpdate:modelValue":s[4]||(s[4]=n=>a.value.slogan=n),placeholder:l.$t("theme.websiteSloganPlaceholder"),maxlength:"64","show-word-limit":""},null,8,["modelValue","placeholder"]),e(v,{type:"info"},{default:t(()=>[d(i(l.$t("theme.websiteSloganTip")),1)]),_:1})]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1})]),_:1})])]),_:1}),o("div",tl,[e(v,{type:"info"},{default:t(()=>[d(i(l.$t("theme.logoDefaultTip")),1)]),_:1})])]),_:1})]),_:1}),e(h,{style:{"--el-card-padding":"16px"},class:"mt-16"},{default:t(()=>[o("h5",ol,i(l.$t("theme.platformSetting")),1),e(h,{shadow:"never",class:"layout-bg"},{default:t(()=>[o("div",al,[o("h5",sl,i(l.$t("theme.pagePreview")),1),e(f,{type:"primary",link:"",onClick:s[6]||(s[6]=n=>Z("platform"))},{default:t(()=>[d(i(l.$t("theme.restoreDefaults")),1)]),_:1})]),e(j,null,{default:t(()=>[o("div",nl,[e(O,{gutter:8},{default:t(()=>[e(F,{span:16},{default:t(()=>[o("div",il,[o("div",{class:fe(["theme-platform-header border-b flex-between",p.value?"":"custom-header"])},[o("div",rl,[o("div",dl,[o("div",ul,[e(se,{height:"25px"})])])]),o("div",ml,[a.value.showProject?(m(),C(B,{key:0,iconName:"app-github",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"}})):z("",!0),a.value.showUserManual?(m(),C(B,{key:1,iconName:"app-user-manual",class:"cursor color-secondary mr-8 ml-8",style:{"font-size":"20px"}})):z("",!0),a.value.showForum?(m(),C(B,{key:2,iconName:"app-help",class:"cursor color-secondary ml-8",style:{"font-size":"20px"}})):z("",!0)])],2)])]),_:1}),e(F,{span:8},{default:t(()=>[o("div",cl,[o("div",null,[e(G,{modelValue:a.value.showUserManual,"onUpdate:modelValue":s[7]||(s[7]=n=>a.value.showUserManual=n),label:l.$t("theme.showUserManual")},null,8,["modelValue","label"]),o("div",hl,[e(U,{modelValue:a.value.userManualUrl,"onUpdate:modelValue":s[8]||(s[8]=n=>a.value.userManualUrl=n),placeholder:l.$t("theme.urlPlaceholder"),"show-word-limit":"",maxlength:"128"},null,8,["modelValue","placeholder"])])]),o("div",pl,[e(G,{modelValue:a.value.showForum,"onUpdate:modelValue":s[9]||(s[9]=n=>a.value.showForum=n),label:l.$t("theme.showForum")},null,8,["modelValue","label"]),o("div",_l,[e(U,{modelValue:a.value.forumUrl,"onUpdate:modelValue":s[10]||(s[10]=n=>a.value.forumUrl=n),placeholder:l.$t("theme.urlPlaceholder"),"show-word-limit":"",maxlength:"128"},null,8,["modelValue","placeholder"])])]),o("div",fl,[e(G,{modelValue:a.value.showProject,"onUpdate:modelValue":s[11]||(s[11]=n=>a.value.showProject=n),label:l.$t("theme.showProject")},null,8,["modelValue","label"]),o("div",vl,[e(U,{modelValue:a.value.projectUrl,"onUpdate:modelValue":s[12]||(s[12]=n=>a.value.projectUrl=n),placeholder:l.$t("theme.urlPlaceholder"),"show-word-limit":"",maxlength:"128"},null,8,["modelValue","placeholder"])])])])]),_:1})]),_:1})])]),_:1}),o("div",gl,[e(v,{type:"info"},{default:t(()=>[d(i(l.$t("theme.defaultTip")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),o("div",bl,[e(f,{onClick:le},{default:t(()=>[d(i(l.$t("theme.abandonUpdate")),1)]),_:1}),J((m(),C(f,{type:"primary",onClick:s[13]||(s[13]=n=>te(k.value))},{default:t(()=>[d(i(l.$t("theme.saveAndApply")),1)]),_:1})),[[ne,new(L(ve))([L(ge).ADMIN],[L(be).APPEARANCE_SETTINGS_EDIT],[],"OR")]])])])),[[ie,D.value]])}}}),Vl=W(wl,[["__scopeId","data-v-32317a96"]]);export{Vl as default};
