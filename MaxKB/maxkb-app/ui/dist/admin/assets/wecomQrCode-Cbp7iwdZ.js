import{ay as d,az as m,aA as _,aB as t,aW as f,aF as u,bD as W,cq as w,c1 as L,cf as h}from"./admin-Ca7cl6NN.js";import{c as y,W as C,a as b,b as r,d as k}from"./wecom.prod-BQnzBeVx.js";const x={id:"wecom-qr",class:"wecom-qr flex"},z=d({__name:"wecomQrCode",props:{config:{}},setup(s){const i=m(),{login:l}=_(),g=t({}),p=t({isWeComLogin:!1}),n=s;return(async()=>{await W();const o={corpId:n.config.corp_id,agentId:n.config.agent_id},a=localStorage.getItem("MaxKB-locale")||w()||"en-US",c=window.location.origin;console.log("redirectUri",c);try{g.value=y({el:"#wecom-qr",params:{login_type:k.corpApp,appid:o.corpId||"",agentid:o.agentId,redirect_uri:c,state:"fit2cloud-wecom-qr",lang:a==="zh-CN"||a==="zh-Hant"?r.zh:r.en,redirect_type:b.callback,panel_size:C.small},onCheckWeComLogin:p.value,async onLoginSuccess({code:e}){l.wecomCallback(e).then(()=>{setTimeout(()=>{i.push({name:"home"})})})},onLoginFail(e){L(`${e.errMsg}`)}})}catch{}})(),(o,a)=>(u(),f("div",x))}}),B=h(z,[["__scopeId","data-v-b810dfa3"]]);export{B as default};
