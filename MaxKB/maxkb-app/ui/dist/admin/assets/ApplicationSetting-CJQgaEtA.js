import{ay as bl,aP as yl,aO as J,aQ as Se,aC as R,aB as r,aU as wl,bF as hl,az as kl,b6 as Sl,aW as y,aI as n,aH as o,aJ as p,aE as m,b1 as c,b2 as v,aG as a,aD as u,aT as T,b3 as $e,bG as $l,aZ as Q,bH as Te,aK as w,b8 as Y,b7 as Tl,aS as E,aX as K,aY as Z,cg as Ve,aF as i,ch as h,bX as Me,cf as Vl}from"./admin-Ca7cl6NN.js";import{_ as Ml}from"./AIModeParamSettingDialog.vue_vue_type_script_setup_true_lang-CewLxAyU.js";import{G as Cl,_ as Pl,a as Rl,b as Dl,c as ql,d as Ol,e as Al,f as Ul}from"./ToolDialog.vue_vue_type_style_index_0_lang-DJj_HZMo.js";const Il={class:"p-16-24 application-setting"},Nl={class:"flex-between w-full mb-16"},El={class:"p-24 mb-16",style:{"padding-bottom":"0"}},Kl={class:"title-decoration-1"},Ll={class:"scrollbar-height-left"},zl={class:"flex-between"},Bl={class:"flex-between"},Fl={class:"flex-between"},Wl={class:"flex align-center"},Gl={class:"flex align-center"},jl={class:"mr-4"},xl={key:0,class:"color-danger ml-4"},Hl={class:"flex-between"},Xl={class:"w-full"},Jl={class:"flex-between"},Ql={class:"flex align-center",style:{width:"80%"}},Yl=["title"],Zl={class:"flex align-center"},et={class:"mr-4"},lt={key:0,class:"color-danger ml-4"},tt={class:"flex-between"},ot={class:"flex"},at={key:1,class:"w-full mb-16"},st={key:0,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},nt={class:"flex align-center",style:{"line-height":"20px"}},it=["src"],dt=["title"],pt={class:"flex-between"},ut={class:"mr-4"},rt={class:"flex"},mt={key:3,class:"w-full mb-16"},ct={key:0,class:"flex-between border border-r-6 white-bg mb-4",style:{padding:"5px 8px"}},_t={class:"flex align-center",style:{"line-height":"20px"}},vt=["src"],ft=["title"],gt={class:"flex-between"},bt={class:"mr-4"},yt={class:"flex"},wt={class:"flex-between"},ht={class:"mr-4"},kt={class:"flex"},St={class:"flex-between"},$t={class:"mr-4"},Tt={key:0,class:"color-danger"},Vt={class:"flex"},Mt={class:"flex-between w-full"},Ct={class:"flex-between"},Pt={class:"mr-4"},Rt={key:0,class:"color-danger"},Dt={class:"flex"},qt={class:"w-full"},Ot={class:"flex-between w-full"},At={class:"title-decoration-1 mb-16"},Ut={class:"dialog-bg"},It={class:"scrollbar-height"},Nt=bl({__name:"ApplicationSetting",setup(Et){const I=yl(),ee=kl(),{params:{id:b}}=I,_=J(()=>I.path.includes("resource-management")?"systemManage":"workspace"),le=J(()=>Se.application[_.value]),D=J(()=>Se.tool[_.value]),Ce=R("views.application.form.prompt.defaultPrompt",{data:"{data}",question:"{question}"}),Pe=R("views.application.dialog.defaultPrompt1",{question:"{question}"})+"<data></data>"+R("views.application.dialog.defaultPrompt2"),z=r(),te=r(),B=r(),F=r(),oe=r(),ae=r(),W=r(),se=r(),f=r(!1),Re=r(!1),e=r({name:"",desc:"",model_id:"",dialogue_number:1,prologue:R("views.application.form.defaultPrologue"),knowledge_id_list:[],knowledge_setting:{top_n:3,similarity:.6,max_paragraph_char_number:5e3,search_mode:"embedding",no_references_setting:{status:"ai_questioning",value:"{question}"}},model_setting:{prompt:Ce,system:"",no_references_prompt:"{question}",reasoning_content_enable:!1},model_params_setting:{},problem_optimization:!1,problem_optimization_prompt:Pe,stt_model_id:"",tts_model_id:"",stt_model_enable:!1,tts_model_enable:!1,tts_type:"BROWSER",type:"SIMPLE",mcp_enable:!1,mcp_tool_ids:[],mcp_servers:"",mcp_source:"referencing",tool_enable:!1,tool_ids:[],mcp_output_enable:!0});r({});const De=wl({name:[{required:!0,message:R("views.application.form.appName.placeholder"),trigger:"blur"}]}),ne=r(null),q=r([]),ie=r(null),de=r(null);function qe(l){e.value.prologue=l}function Oe(l){e.value.model_setting.prompt=l}function Ae(l){e.value.model_setting.no_references_prompt=l}function Ue(l){e.value.model_setting.system=l}function Ie(l){e.value.model_setting={...e.value.model_setting,...l}}const Ne=l=>{l&&l.validate().then(()=>T({type:"application",systemType:_.value}).putApplication(b,e.value,f).then(()=>T({type:"application",systemType:_.value}).publish(b,{},f)).then(()=>{$e(R("views.application.tip.publishSuccess"))}))},Ee=async l=>{l&&await l.validate((t,d)=>{t&&T({type:"application",systemType:_.value}).putApplication(b,e.value,f).then(()=>{$e(R("common.saveSuccess"))})})},Ke=l=>{var t;e.value.model_id=l,l?(t=z.value)==null||t.reset_default(l,b):re({})},Le=()=>{var l;e.value.model_id&&((l=z.value)==null||l.open(e.value.model_id,b,e.value.model_params_setting))},ze=()=>{var l;e.value.model_id&&((l=ae.value)==null||l.open(e.value.model_id,b))},Be=l=>{e.value.model_setting.system=l},Fe=()=>{var l;(l=te.value)==null||l.open(e.value.model_setting)},We=()=>{var l;e.value.tts_model_id&&((l=B.value)==null||l.open(e.value.tts_model_id,b,e.value.tts_model_params_setting))},Ge=()=>{var l;e.value.stt_model_id&&((l=F.value)==null||l.open(e.value.stt_model_id,b,e.value.stt_model_params_setting))},je=()=>{var l;(l=oe.value)==null||l.open(e.value)};function xe(l){e.value.tool_ids&&(e.value.tool_ids=e.value.tool_ids.filter(t=>t!==l))}function He(l){e.value.mcp_tool_ids&&(e.value.mcp_tool_ids=e.value.mcp_tool_ids.filter(t=>t!==l))}const pe=r();function Xe(){const l={mcp_servers:e.value.mcp_servers,mcp_tool_ids:e.value.mcp_tool_ids,mcp_source:e.value.mcp_source};pe.value.open(l,C.value)}function Je(l){e.value.mcp_servers=l.mcp_servers,e.value.mcp_tool_ids=l.mcp_tool_ids,e.value.mcp_source=l.mcp_source}const ue=r();function Qe(){ue.value.open(e.value.tool_ids)}function Ye(l){e.value.tool_ids=l.tool_ids}const O=r([]);function Ze(){var t;const l=_.value==="systemManage"?{scope:"WORKSPACE",tool_type:"CUSTOM",workspace_id:(t=e.value)==null?void 0:t.workspace_id}:{scope:"WORKSPACE",tool_type:"CUSTOM"};T({type:"tool",systemType:_.value}).getAllToolList(l).then(d=>{O.value=[...d.data.shared_tools,...d.data.tools].filter(A=>A.is_active)})}const C=r([]);function el(){var t;const l=_.value==="systemManage"?{scope:"WORKSPACE",tool_type:"MCP",workspace_id:(t=e.value)==null?void 0:t.workspace_id}:{scope:"WORKSPACE",tool_type:"MCP"};T({type:"tool",systemType:_.value}).getAllToolList(l).then(d=>{C.value=[...d.data.shared_tools,...d.data.tools].filter(A=>A.is_active)})}function G(l){e.value={...e.value,...l}}function re(l){e.value.model_params_setting=l}function me(l){e.value.tts_model_params_setting=l}function ce(l){e.value.stt_model_params_setting=l}function ll(l){e.value.knowledge_id_list&&e.value.knowledge_id_list.splice(e.value.knowledge_id_list.indexOf(l),1)}function tl(l){q.value=l,e.value.knowledge_id_list=l.map(t=>t.id)}function ol(){se.value.open(e.value.knowledge_id_list)}function al(){T({type:"application",systemType:_.value}).getApplicationDetail(b,f).then(l=>{e.value=l.data,e.value.model_id=l.data.model,e.value.stt_model_id=l.data.stt_model,e.value.tts_model_id=l.data.tts_model,e.value.tts_type=l.data.tts_type,q.value=l.data.knowledge_list,e.value.model_setting.no_references_prompt=l.data.model_setting.no_references_prompt||"{question}",$l([Te.IS_EE,Te.IS_PE],"OR")&&T({type:"application",systemType:_.value}).getApplicationSetting(b).then(t=>{e.value={...e.value,...t.data}})})}function _e(){var t;f.value=!0;const l=_.value==="systemManage"?{model_type:"LLM",workspace_id:(t=e.value)==null?void 0:t.workspace_id}:{model_type:"LLM"};T({type:"model",systemType:_.value}).getSelectModelList(l).then(d=>{ne.value=Q.groupBy(d==null?void 0:d.data,"provider"),f.value=!1}).catch(()=>{f.value=!1})}function sl(){var t;f.value=!0;const l=_.value==="systemManage"?{model_type:"STT",workspace_id:(t=e.value)==null?void 0:t.workspace_id}:{model_type:"STT"};T({type:"model",systemType:_.value}).getSelectModelList(l).then(d=>{ie.value=Q.groupBy(d==null?void 0:d.data,"provider"),f.value=!1}).catch(()=>{f.value=!1})}function nl(){var t;f.value=!0;const l=_.value==="systemManage"?{model_type:"TTS",workspace_id:(t=e.value)==null?void 0:t.workspace_id}:{model_type:"TTS"};T({type:"model",systemType:_.value}).getSelectModelList(l).then(d=>{de.value=Q.groupBy(d==null?void 0:d.data,"provider"),f.value=!1}).catch(()=>{f.value=!1})}function il(){var l;e.value.tts_model_id?(l=B.value)==null||l.reset_default(e.value.tts_model_id,b):me({})}function dl(){var l;e.value.stt_model_id?(l=F.value)==null||l.reset_default(e.value.stt_model_id,b):ce({})}function pl(){e.value.tts_model_enable||(e.value.tts_model_id=void 0,e.value.tts_type="BROWSER")}function ve(){e.value.stt_model_enable||(e.value.stt_model_id=void 0)}return hl(()=>{I.path.includes("WORK_FLOW")&&(_.value=="workspace"?ee.push(`/application/workspace/${I.params.id}/workflow`):ee.push(`/application/resource-management/${I.params.id}/workflow`))}),Sl(()=>{_e(),al(),sl(),nl(),D.value.read()&&(Ze(),el())}),(l,t)=>{const d=u("el-button"),A=u("el-input"),g=u("el-form-item"),S=u("AppIcon"),j=u("ModelSelect"),x=u("el-tooltip"),L=u("MdEditorMagnify"),ul=u("el-input-number"),rl=u("el-text"),ml=u("KnowledgeIcon"),H=u("Close"),N=u("el-icon"),fe=u("el-card"),X=u("el-col"),ge=u("el-row"),U=u("el-switch"),be=u("el-avatar"),ye=u("ToolIcon"),we=u("el-checkbox"),he=u("Operation"),ke=u("el-radio"),cl=u("el-radio-group"),_l=u("el-form"),vl=u("el-scrollbar"),fl=u("AiChat"),gl=Tl("loading");return i(),y("div",Il,[n("div",Nl,[n("h3",null,p(l.$t("common.setting")),1),n("div",null,[le.value.edit(v(b))?(i(),m(d,{key:0,type:"primary",onClick:t[0]||(t[0]=s=>Ee(W.value)),disabled:f.value},{default:a(()=>[w(p(l.$t("common.save")),1)]),_:1},8,["disabled"])):c("",!0),le.value.edit(v(b))?(i(),m(d,{key:1,type:"primary",onClick:t[1]||(t[1]=s=>Ne(W.value)),disabled:f.value},{default:a(()=>[w(p(l.$t("views.application.operation.publish")),1)]),_:1},8,["disabled"])):c("",!0)])]),o(fe,{style:{"--el-card-padding":"0"}},{default:a(()=>[Y((i(),m(ge,null,{default:a(()=>[o(X,{span:10},{default:a(()=>[n("div",El,[n("h4",Kl,p(l.$t("views.applicationOverview.appInfo.header")),1)]),n("div",Ll,[o(vl,null,{default:a(()=>[o(_l,{"hide-required-asterisk":"",ref_key:"applicationFormRef",ref:W,model:e.value,rules:De,"label-position":"top","require-asterisk-position":"right",class:"p-24",style:{"padding-top":"0"}},{default:a(()=>[o(g,{prop:"name"},{label:a(()=>[n("div",zl,[n("span",null,[w(p(l.$t("views.application.form.appName.label"))+" ",1),t[28]||(t[28]=n("span",{class:"color-danger"},"*",-1))])])]),default:a(()=>[o(A,{modelValue:e.value.name,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value.name=s),maxlength:"64",placeholder:l.$t("views.application.form.appName.placeholder"),"show-word-limit":"",onBlur:t[3]||(t[3]=s=>{var k;return e.value.name=(k=e.value.name)==null?void 0:k.trim()})},null,8,["modelValue","placeholder"])]),_:1}),o(g,{label:l.$t("common.desc")},{default:a(()=>[o(A,{modelValue:e.value.desc,"onUpdate:modelValue":t[4]||(t[4]=s=>e.value.desc=s),type:"textarea",placeholder:l.$t("views.application.form.appDescription.placeholder"),rows:3,maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(g,{label:l.$t("views.application.form.aiModel.label")},{label:a(()=>[n("div",Bl,[n("span",null,p(l.$t("views.application.form.aiModel.label")),1),o(d,{type:"primary",link:"",onClick:Le,disabled:!e.value.model_id},{default:a(()=>[o(S,{iconName:"app-setting",class:"mr-4"}),w(" "+p(l.$t("common.paramSetting")),1)]),_:1},8,["disabled"])])]),default:a(()=>[o(j,{modelValue:e.value.model_id,"onUpdate:modelValue":t[5]||(t[5]=s=>e.value.model_id=s),placeholder:l.$t("views.application.form.aiModel.placeholder"),options:ne.value,onChange:Ke,onSubmitModel:_e,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"]),o(g,null,{label:a(()=>[n("div",Fl,[n("div",Wl,[n("span",null,p(l.$t("views.application.form.roleSettings.label")),1),o(x,{effect:"dark",content:l.$t("views.application.form.roleSettings.tooltip"),placement:"right"},{default:a(()=>[o(S,{iconName:"app-warning",class:"app-warning-icon ml-4"})]),_:1},8,["content"])]),o(d,{type:"primary",link:"",onClick:ze,disabled:!e.value.model_id},{default:a(()=>[o(S,{iconName:"app-generate-star",class:"mr-4"}),w(" "+p(l.$t("views.application.generateDialog.label")),1)]),_:1},8,["disabled"])])]),default:a(()=>[o(L,{title:l.$t("views.application.form.roleSettings.label"),modelValue:e.value.model_setting.system,"onUpdate:modelValue":t[6]||(t[6]=s=>e.value.model_setting.system=s),style:{height:"120px"},onSubmitDialog:Ue,placeholder:l.$t("views.application.form.roleSettings.placeholder",{data:"{data}",question:"{question}"})},null,8,["title","modelValue","placeholder"])]),_:1}),o(g,{prop:"model_setting.no_references_prompt",rules:{required:e.value.model_id,message:l.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:a(()=>[n("div",Gl,[n("span",jl,p(l.$t("views.application.form.prompt.label")+l.$t("views.application.form.prompt.noReferences")),1),o(x,{effect:"dark",content:l.$t("views.application.form.prompt.tooltip"),placement:"right","popper-class":"max-w-350"},{default:a(()=>[o(S,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"]),e.value.model_id?(i(),y("span",xl,"*")):c("",!0)])]),default:a(()=>[o(L,{title:l.$t("views.application.form.prompt.label")+l.$t("views.application.form.prompt.noReferences"),modelValue:e.value.model_setting.no_references_prompt,"onUpdate:modelValue":t[7]||(t[7]=s=>e.value.model_setting.no_references_prompt=s),style:{height:"120px"},onSubmitDialog:Ae,placeholder:l.$t("views.application.form.roleSettings.placeholder",{data:"{data}",question:"{question}"})},null,8,["title","modelValue","placeholder"])]),_:1},8,["rules"]),o(g,{label:l.$t("views.application.form.historyRecord.label"),onClick:t[9]||(t[9]=E(()=>{},["prevent"]))},{default:a(()=>[o(ul,{modelValue:e.value.dialogue_number,"onUpdate:modelValue":t[8]||(t[8]=s=>e.value.dialogue_number=s),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:"$t('views.application.form.relatedKnowledgeBase')"},{label:a(()=>[n("div",Hl,[n("span",null,p(l.$t("views.application.form.relatedKnowledge.label")),1),n("div",null,[o(d,{type:"primary",link:"",onClick:je},{default:a(()=>[o(S,{iconName:"app-setting",class:"mr-4"}),w(" "+p(l.$t("common.paramSetting")),1)]),_:1}),o(d,{type:"primary",link:"",onClick:ol},{default:a(()=>[o(S,{iconName:"app-add-outlined",class:"mr-4"}),w(" "+p(l.$t("common.add")),1)]),_:1})])])]),default:a(()=>{var s;return[n("div",Xl,[((s=e.value.knowledge_id_list)==null?void 0:s.length)===0?(i(),m(rl,{key:0,type:"info"},{default:a(()=>[w(p(l.$t("views.application.form.relatedKnowledge.placeholder")),1)]),_:1})):(i(),m(ge,{key:1,gutter:12},{default:a(()=>[(i(!0),y(K,null,Z(e.value.knowledge_id_list,(k,P)=>(i(),m(X,{xs:24,sm:24,md:24,lg:12,xl:12,class:"mb-8",key:P},{default:a(()=>[o(fe,{class:"relate-knowledge-card border-r-6",shadow:"never"},{default:a(()=>{var V,M,$;return[n("div",Jl,[n("div",Ql,[o(ml,{type:(V=v(h)(q.value,k,"id"))==null?void 0:V.type,class:"mr-12"},null,8,["type"]),n("span",{class:"ellipsis cursor",title:(M=v(h)(q.value,k,"id"))==null?void 0:M.name},p(($=v(h)(q.value,k,"id"))==null?void 0:$.name),9,Yl)]),o(d,{text:"",onClick:Kt=>ll(k)},{default:a(()=>[o(N,null,{default:a(()=>[o(H)]),_:1})]),_:1},8,["onClick"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}))])]}),_:1}),o(g,{label:l.$t("views.application.form.prompt.label"),prop:"model_setting.prompt",rules:{required:e.value.model_id,message:l.$t("views.application.form.prompt.requiredMessage"),trigger:"blur"}},{label:a(()=>[n("div",Zl,[n("span",et,p(l.$t("views.application.form.prompt.label"))+" "+p(l.$t("views.application.form.prompt.references")),1),o(x,{effect:"dark",content:l.$t("views.application.form.prompt.tooltip"),"popper-class":"max-w-350",placement:"right"},{default:a(()=>[o(S,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"]),e.value.model_id?(i(),y("span",lt,"*")):c("",!0)])]),default:a(()=>[o(L,{title:l.$t("views.application.form.prompt.label")+l.$t("views.application.form.prompt.references"),modelValue:e.value.model_setting.prompt,"onUpdate:modelValue":t[10]||(t[10]=s=>e.value.model_setting.prompt=s),style:{height:"150px"},onSubmitDialog:Oe,placeholder:l.$t("views.application.form.roleSettings.placeholder",{data:"{data}",question:"{question}"})},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),o(g,{label:l.$t("views.application.form.prologue")},{default:a(()=>[o(L,{title:l.$t("views.application.form.prologue"),modelValue:e.value.prologue,"onUpdate:modelValue":t[11]||(t[11]=s=>e.value.prologue=s),style:{height:"150px"},onSubmitDialog:qe},null,8,["title","modelValue"])]),_:1},8,["label"]),D.value.read()?(i(),m(g,{key:0,onClick:t[13]||(t[13]=E(()=>{},["prevent"]))},{label:a(()=>[n("div",tt,[t[29]||(t[29]=n("span",null,"MCP",-1)),n("div",ot,[e.value.mcp_enable?(i(),m(d,{key:0,type:"primary",link:"",onClick:Xe,onRefreshForm:G},{default:a(()=>[o(S,{iconName:"app-setting"})]),_:1})):c("",!0),o(U,{class:"ml-8",size:"small",modelValue:e.value.mcp_enable,"onUpdate:modelValue":t[12]||(t[12]=s=>e.value.mcp_enable=s)},null,8,["modelValue"])])])]),_:1})):c("",!0),(e.value.mcp_tool_ids&&e.value.mcp_tool_ids.length>0||e.value.mcp_servers&&e.value.mcp_servers.length>0)&&D.value.read()?(i(),y("div",at,[(i(!0),y(K,null,Z(e.value.mcp_tool_ids,(s,k)=>{var P,V,M;return i(),y(K,{key:k},[v(h)(C.value,s,"id")?(i(),y("div",st,[n("div",nt,[(P=v(h)(C.value,s,"id"))!=null&&P.icon?(i(),m(be,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:a(()=>{var $;return[n("img",{src:v(Me)(($=v(h)(C.value,s,"id"))==null?void 0:$.icon),alt:""},null,8,it)]}),_:2},1024)):(i(),m(ye,{key:1,type:"MCP",class:"mr-8",size:20})),n("div",{class:"ellipsis",title:(V=v(h)(C.value,s,"id"))==null?void 0:V.name},p(((M=v(h)(C.value,s,"id"))==null?void 0:M.name)||l.$t("common.custom")+" MCP"),9,dt)]),o(d,{text:"",onClick:$=>He(s)},{default:a(()=>[o(N,null,{default:a(()=>[o(H)]),_:1})]),_:1},8,["onClick"])])):c("",!0)],64)}),128))])):c("",!0),D.value.read()?(i(),m(g,{key:2,onClick:t[15]||(t[15]=E(()=>{},["prevent"]))},{label:a(()=>[n("div",pt,[n("span",ut,p(l.$t("views.tool.title")),1),n("div",rt,[e.value.tool_enable?(i(),m(d,{key:0,type:"primary",link:"",onClick:Qe,onRefreshForm:G},{default:a(()=>[o(S,{iconName:"app-setting"})]),_:1})):c("",!0),o(U,{class:"ml-8",size:"small",modelValue:e.value.tool_enable,"onUpdate:modelValue":t[14]||(t[14]=s=>e.value.tool_enable=s)},null,8,["modelValue"])])])]),_:1})):c("",!0),e.value.tool_ids&&e.value.tool_ids.length>0&&D.value.read()?(i(),y("div",mt,[(i(!0),y(K,null,Z(e.value.tool_ids,(s,k)=>{var P,V,M;return i(),y(K,{key:k},[v(h)(O.value,s,"id")?(i(),y("div",ct,[n("div",_t,[(P=v(h)(O.value,s,"id"))!=null&&P.icon?(i(),m(be,{key:0,shape:"square",size:20,style:{background:"none"},class:"mr-8"},{default:a(()=>{var $;return[n("img",{src:v(Me)(($=v(h)(O.value,s,"id"))==null?void 0:$.icon),alt:""},null,8,vt)]}),_:2},1024)):(i(),m(ye,{key:1,class:"mr-8",size:20})),n("div",{class:"ellipsis",title:(V=v(h)(O.value,s,"id"))==null?void 0:V.name},p((M=v(h)(O.value,s,"id"))==null?void 0:M.name),9,ft)]),o(d,{text:"",onClick:$=>xe(s)},{default:a(()=>[o(N,null,{default:a(()=>[o(H)]),_:1})]),_:1},8,["onClick"])])):c("",!0)],64)}),128))])):c("",!0),(e.value.mcp_enable||e.value.tool_enable)&&D.value.read()?(i(),m(g,{key:4,onClick:t[17]||(t[17]=E(()=>{},["prevent"]))},{label:a(()=>[n("div",gt,[n("span",bt,p(l.$t("views.application.form.mcp_output_enable")),1),n("div",yt,[o(U,{class:"ml-8",size:"small",modelValue:e.value.mcp_output_enable,"onUpdate:modelValue":t[16]||(t[16]=s=>e.value.mcp_output_enable=s)},null,8,["modelValue"])])])]),_:1})):c("",!0),o(g,{onClick:t[19]||(t[19]=E(()=>{},["prevent"]))},{label:a(()=>[n("div",wt,[n("span",ht,p(l.$t("views.application.form.reasoningContent.label")),1),n("div",kt,[o(d,{type:"primary",link:"",onClick:Fe},{default:a(()=>[o(S,{iconName:"app-setting"})]),_:1}),o(U,{class:"ml-8",size:"small",modelValue:e.value.model_setting.reasoning_content_enable,"onUpdate:modelValue":t[18]||(t[18]=s=>e.value.model_setting.reasoning_content_enable=s),onChange:ve},null,8,["modelValue"])])])]),_:1}),o(g,{prop:"stt_model_id",rules:{required:e.value.stt_model_enable,message:l.$t("views.application.form.voiceInput.requiredMessage"),trigger:"change"}},{label:a(()=>[n("div",St,[n("span",$t,[w(p(l.$t("views.application.form.voiceInput.label"))+" ",1),e.value.stt_model_enable?(i(),y("span",Tt,"*")):c("",!0)]),n("div",Vt,[e.value.stt_model_enable?(i(),m(we,{key:0,modelValue:e.value.stt_autosend,"onUpdate:modelValue":t[20]||(t[20]=s=>e.value.stt_autosend=s)},{default:a(()=>[w(p(l.$t("views.application.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):c("",!0),o(U,{class:"ml-8",size:"small",modelValue:e.value.stt_model_enable,"onUpdate:modelValue":t[21]||(t[21]=s=>e.value.stt_model_enable=s),onChange:ve},null,8,["modelValue"])])])]),default:a(()=>[n("div",Mt,[Y(o(j,{modelValue:e.value.stt_model_id,"onUpdate:modelValue":t[22]||(t[22]=s=>e.value.stt_model_id=s),placeholder:l.$t("views.application.form.voiceInput.placeholder"),options:ie.value,onChange:dl,"model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[Ve,e.value.stt_model_enable]]),e.value.stt_model_enable?(i(),m(d,{key:0,onClick:Ge,disabled:!e.value.stt_model_id,class:"ml-8"},{default:a(()=>[o(N,null,{default:a(()=>[o(he)]),_:1})]),_:1},8,["disabled"])):c("",!0)])]),_:1},8,["rules"]),o(g,{prop:"tts_model_id",rules:{required:e.value.tts_type==="TTS"&&e.value.tts_model_enable,message:l.$t("views.application.form.voicePlay.requiredMessage"),trigger:"change"}},{label:a(()=>[n("div",Ct,[n("span",Pt,[w(p(l.$t("views.application.form.voicePlay.label"))+" ",1),e.value.tts_type==="TTS"&&e.value.tts_model_enable?(i(),y("span",Rt,"*")):c("",!0)]),n("div",Dt,[e.value.tts_model_enable?(i(),m(we,{key:0,modelValue:e.value.tts_autoplay,"onUpdate:modelValue":t[23]||(t[23]=s=>e.value.tts_autoplay=s)},{default:a(()=>[w(p(l.$t("views.application.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):c("",!0),o(U,{class:"ml-8",size:"small",modelValue:e.value.tts_model_enable,"onUpdate:modelValue":t[24]||(t[24]=s=>e.value.tts_model_enable=s),onChange:pl},null,8,["modelValue"])])])]),default:a(()=>[n("div",qt,[Y(o(cl,{modelValue:e.value.tts_type,"onUpdate:modelValue":t[25]||(t[25]=s=>e.value.tts_type=s),class:"mb-8"},{default:a(()=>[o(ke,{value:"BROWSER"},{default:a(()=>[w(p(l.$t("views.application.form.voicePlay.browser")),1)]),_:1}),o(ke,{value:"TTS"},{default:a(()=>[w(p(l.$t("views.application.form.voicePlay.tts")),1)]),_:1})]),_:1},8,["modelValue"]),[[Ve,e.value.tts_model_enable]])]),n("div",Ot,[e.value.tts_type==="TTS"&&e.value.tts_model_enable?(i(),m(j,{key:0,modelValue:e.value.tts_model_id,"onUpdate:modelValue":t[26]||(t[26]=s=>e.value.tts_model_id=s),placeholder:l.$t("views.application.form.voicePlay.placeholder"),options:de.value,onChange:t[27]||(t[27]=s=>il()),"model-type":"TTS"},null,8,["modelValue","placeholder","options"])):c("",!0),e.value.tts_type==="TTS"?(i(),m(d,{key:1,onClick:We,disabled:!e.value.tts_model_id,class:"ml-8"},{default:a(()=>[o(N,null,{default:a(()=>[o(he)]),_:1})]),_:1},8,["disabled"])):c("",!0)])]),_:1},8,["rules"])]),_:1},8,["model","rules"])]),_:1})])]),_:1}),o(X,{span:14,class:"p-24 border-l"},{default:a(()=>[n("h4",At,p(l.$t("views.application.appTest")),1),n("div",Ut,[n("div",It,[o(fl,{applicationDetails:e.value,type:"debug-ai-chat"},null,8,["applicationDetails"])])])]),_:1})]),_:1})),[[gl,f.value]])]),_:1}),o(Ml,{ref_key:"AIModeParamSettingDialogRef",ref:z,onRefresh:re},null,512),o(Cl,{onReplace:Be,ref_key:"GeneratePromptDialogRef",ref:ae},null,512),o(Pl,{ref_key:"TTSModeParamSettingDialogRef",ref:B,onRefresh:me},null,512),o(Rl,{ref_key:"STTModeParamSettingDialogRef",ref:F,onRefresh:ce},null,512),o(Dl,{ref_key:"ParamSettingDialogRef",ref:oe,onRefresh:G},null,512),o(ql,{ref_key:"AddKnowledgeDialogRef",ref:se,onAddData:tl,data:q.value,loading:Re.value},null,8,["data","loading"]),o(Ol,{ref_key:"ReasoningParamSettingDialogRef",ref:te,onRefresh:Ie},null,512),o(Al,{ref_key:"mcpServersDialogRef",ref:pe,onRefresh:Je},null,512),o(Ul,{ref_key:"toolDialogRef",ref:ue,onRefresh:Ye},null,512)])}}}),Ft=Vl(Nt,[["__scopeId","data-v-70cc0983"]]);export{Ft as default};
