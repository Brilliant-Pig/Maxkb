import{ay as D,aB as t,aU as V,aC as p,aV as E,b6 as B,b4 as N,aD as s,b7 as $,b8 as q,aE as S,aF as T,aG as m,aH as d,aT as F,aZ as U}from"./admin-Ca7cl6NN.js";const G=D({__name:"BaseForm",props:{data:{},apiType:{}},setup(f,{expose:_}){const n=f,l=t({name:"",desc:"",embedding_model_id:""}),g=t(""),b=V({name:[{required:!0,message:p("views.knowledge.form.knowledgeName.requiredMessage"),trigger:"blur"}],desc:[{required:!0,message:p("views.knowledge.form.knowledgeDescription.requiredMessage"),trigger:"blur"}],embedding_model_id:[{required:!0,message:p("views.knowledge.form.EmbeddingModel.requiredMessage"),trigger:"change"}]}),r=t(),i=t(!1),v=t([]);E(()=>n.data,e=>{e&&JSON.stringify(e)!=="{}"&&(l.value.name=e.name,l.value.desc=e.desc,l.value.embedding_model_id=e.embedding_model_id,g.value=e.workspace_id||"",c())},{immediate:!0});function k(){if(r.value)return r.value.validate(e=>e)}function c(){i.value=!0;const e=n.apiType==="systemManage"?{model_type:"EMBEDDING",workspace_id:g.value}:{model_type:"EMBEDDING"};F({type:"model",systemType:n.apiType}).getSelectModelList(e).then(o=>{v.value=U.groupBy(o==null?void 0:o.data,"provider"),i.value=!1}).catch(()=>{i.value=!1})}return B(()=>{n.apiType!=="systemManage"&&c()}),N(()=>{var e;l.value={name:"",desc:"",embedding_model_id:""},(e=r.value)==null||e.clearValidate()}),_({validate:k,form:l}),(e,o)=>{const w=s("el-input"),u=s("el-form-item"),y=s("ModelSelect"),M=s("el-form"),h=$("loading");return q((T(),S(M,{ref_key:"FormRef",ref:r,model:l.value,rules:b,"label-position":"top","require-asterisk-position":"right"},{default:m(()=>[d(u,{label:e.$t("views.knowledge.form.knowledgeName.label"),prop:"name"},{default:m(()=>[d(w,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.name=a),placeholder:e.$t("views.knowledge.form.knowledgeName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:o[1]||(o[1]=a=>l.value.name=l.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:e.$t("views.knowledge.form.knowledgeDescription.label"),prop:"desc"},{default:m(()=>[d(w,{modelValue:l.value.desc,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.desc=a),type:"textarea",placeholder:e.$t("views.knowledge.form.knowledgeDescription.placeholder"),maxlength:"256","show-word-limit":"",autosize:{minRows:3},onBlur:o[3]||(o[3]=a=>l.value.desc=l.value.desc.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:e.$t("views.knowledge.form.EmbeddingModel.label"),prop:"embedding_model_id"},{default:m(()=>[d(y,{modelValue:l.value.embedding_model_id,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.embedding_model_id=a),placeholder:e.$t("views.knowledge.form.EmbeddingModel.placeholder"),options:v.value,"model-type":"EMBEDDING",showFooter:""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[h,i.value]])}}});export{G as _};
