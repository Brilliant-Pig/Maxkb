import{ay as P,aB as m,aU as R,aC as S,aV as T,aD as s,aE as z,aF as y,aG as r,aH as t,aW as G,aX as H,aY as I,aS as $,aI as J,aK as g,aJ as w,aZ as K}from"./admin-Ca7cl6NN.js";const L={class:"dialog-footer"},W=P({__name:"FieldFormDialog",emits:["refresh"],setup(M,{expose:_,emit:k}){const i=["string","int","dict","array","float"],F=k,f=m(),q=m(!1),d=m(!1),o=m({name:"",type:i[0],desc:"",source:"reference",is_required:!0}),B=R({name:[{required:!0,message:S("views.tool.form.paramName.placeholder"),trigger:"blur"}]}),n=m(!1);T(n,l=>{l||(o.value={name:"",type:i[0],desc:"",source:"reference",is_required:!0},d.value=!1)});const C=l=>{l&&(o.value=K.cloneDeep(l),d.value=!0),n.value=!0},U=async l=>{l&&await l.validate(e=>{e&&(F("refresh",o.value),n.value=!1)})};return _({open:C}),(l,e)=>{const v=s("el-input"),u=s("el-form-item"),p=s("el-option"),c=s("el-select"),N=s("el-switch"),D=s("el-form"),b=s("el-button"),E=s("el-dialog");return y(),z(E,{title:d.value?l.$t("common.param.editParam"):l.$t("common.param.addParam"),modelValue:n.value,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value=a),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":""},{footer:r(()=>[J("span",L,[t(b,{onClick:e[8]||(e[8]=$(a=>n.value=!1,["prevent"]))},{default:r(()=>[g(w(l.$t("common.cancel")),1)]),_:1}),t(b,{type:"primary",onClick:e[9]||(e[9]=a=>U(f.value)),loading:q.value},{default:r(()=>[g(w(d.value?l.$t("common.save"):l.$t("common.add")),1)]),_:1},8,["loading"])])]),default:r(()=>[t(D,{"label-position":"top",ref_key:"fieldFormRef",ref:f,rules:B,model:o.value,"require-asterisk-position":"right"},{default:r(()=>[t(u,{label:l.$t("views.tool.form.paramName.label"),prop:"name"},{default:r(()=>[t(v,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),placeholder:l.$t("views.tool.form.paramName.placeholder"),maxlength:"64","show-word-limit":"",onBlur:e[1]||(e[1]=a=>o.value.name=o.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.dataType.label")},{default:r(()=>[t(c,{modelValue:o.value.type,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.type=a)},{default:r(()=>[(y(),G(H,null,I(i,a=>t(p,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(u,{label:l.$t("dynamicsForm.paramForm.tooltip.label")},{default:r(()=>[t(v,{modelValue:o.value.desc,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.desc=a),placeholder:l.$t("dynamicsForm.paramForm.tooltip.placeholder"),maxlength:128,"show-word-limit":"",onBlur:e[4]||(e[4]=a=>{var V;return o.value.desc=(V=o.value.desc)==null?void 0:V.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.source.label")},{default:r(()=>[t(c,{modelValue:o.value.source,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.source=a)},{default:r(()=>[t(p,{label:l.$t("views.tool.form.source.reference"),value:"reference"},null,8,["label"]),t(p,{label:l.$t("common.custom"),value:"custom"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(u,{label:l.$t("views.tool.form.required.label"),onClick:e[7]||(e[7]=$(()=>{},["prevent"]))},{default:r(()=>[t(N,{size:"small",modelValue:o.value.is_required,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.is_required=a)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}});export{W as _};
