import{ay as u,az as _,aP as f,aB as s,aA as W,aW as w,aF as y,bD as L,cq as h,c1 as C,cf as k}from"./admin-Ca7cl6NN.js";import{c as q,W as T,a as x,b as r,d as z}from"./wecom.prod-BQnzBeVx.js";const I={id:"wecom-qr",class:"wecom-qr flex"},b=u({__name:"wecomQrCode",props:{config:{}},setup(i){const p=_(),c=f(),{params:{accessToken:n}}=c,l=s({}),g=s({isWeComLogin:!1}),{chatUser:d}=W(),t=i;return(async()=>{await L();const a={corpId:t.config.corp_id,agentId:t.config.agent_id},o=localStorage.getItem("MaxKB-locale")||h()||"en-US",m=window.location.origin;try{l.value=q({el:"#wecom-qr",params:{login_type:z.corpApp,appid:a.corpId||"",agentid:a.agentId,redirect_uri:m,state:"fit2cloud-wecom-qr",lang:o==="zh-CN"||o==="zh-Hant"?r.zh:r.en,redirect_type:x.callback,panel_size:T.small},onCheckWeComLogin:g.value,async onLoginSuccess({code:e}){d.wecomCallback(e,n).then(()=>{setTimeout(()=>{p.push({name:"chat",params:{accessToken:n},query:c.query})})})},onLoginFail(e){C(`${e.errMsg}`)}})}catch{}})(),(a,o)=>(y(),w("div",I))}}),M=k(b,[["__scopeId","data-v-543adae1"]]);export{M as default};
